{
  "name": "cmdb",
  "contracts": [
    {
      "contract": "cmdb.business_instance.GetBusinessTreeList",
      "name": "GetBusinessTreeList",
      "version": "1.0.0",
      "description": "批量获取业务业务树全路径",
      "endpoint": {
        "method": "GET",
        "uri": "/system/business_tree/list"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "ids",
            "type": "string",
            "description": "实例Id列表使用逗号分隔"
          }
        ],
        "required": ["ids"]
      },
      "response": {
        "type": "object[]",
        "fields": [
          {
            "name": "instanceId",
            "type": "string",
            "description": "实例Id"
          },
          {
            "name": "name",
            "type": "string",
            "description": "业务名称"
          },
          {
            "name": "parents",
            "type": "object[]",
            "fields": [
              {
                "name": "instanceId",
                "type": "string",
                "description": "实例Id"
              },
              {
                "name": "name",
                "type": "string",
                "description": "业务名称"
              }
            ],
            "description": "第一个为根节点,最后一个为该业务的父节点, 例如 parents=[根节点...,父节点的父节点, 父节点]"
          }
        ],
        "required": ["instanceId", "name", "parents"]
      }
    },
    {
      "contract": "cmdb.business_instance.GetBusinessGraph",
      "name": "GetBusinessGraph",
      "version": "1.0.0",
      "description": "查询应用系统子系统拓扑",
      "detail": "查询应用系统展示出树状或者拓扑状的数据结构",
      "endpoint": {
        "method": "GET",
        "uri": "/systems/_graph_mode"
      },
      "request": null,
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "topic_vertices",
            "type": "map[]",
            "description": "根节点"
          },
          {
            "name": "vertices",
            "type": "map[]",
            "description": "节点"
          },
          {
            "name": "edges",
            "type": "map[]",
            "description": "边"
          }
        ],
        "example": {
          "code": 0,
          "message": "",
          "error": "",
          "data": {
            "topic_vertices": [
              {
                "@rid": "59b94392c3652",
                "instanceId": "59b94392c3652",
                "name": "ens_client"
              }
            ],
            "vertices": [
              {
                "@rid": "59cf06df730ef",
                "instanceId": "59cf06df730ef",
                "name": "cmdb"
              }
            ],
            "edges": [
              {
                "@rid": "59cf06df730ef59b94392c3652",
                "_relation_id": "system_sub_system",
                "in": "59b94392c3652",
                "out": "59cf06df730ef"
              }
            ]
          }
        }
      }
    },
    {
      "contract": "cmdb.business_instance.SearchAppInSystem",
      "name": "SearchAppInSystem",
      "version": "1.0.0",
      "description": "查询应用系统的所有子系统以及所有子系统的子系统所包含的应用",
      "detail": "关于搜索条件的文档说明请参考[实例搜索接口]的说明",
      "endpoint": {
        "method": "POST",
        "uri": "/system/:systemInstanceId/_search_apps"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "systemInstanceId",
            "type": "instance_id",
            "description": "系统的实例ID"
          },
          {
            "name": "page",
            "type": "page",
            "description": "页码"
          },
          {
            "name": "page_size",
            "type": "page_size",
            "description": "页大小"
          },
          {
            "name": "query",
            "type": "map",
            "description": "查询条件,与[实例搜索接口]的query字段说明一致"
          },
          {
            "name": "fields",
            "type": "map",
            "description": "过滤的字段列表, 留空代表返回所有字段(true: 表示指定获取字段, false: 表示指定不获取的字段)(支持关系数据的二级jsonPath格式的指定字段如clusters.name)"
          },
          {
            "name": "sort",
            "type": "map",
            "description": "按字段排序, 留空默认按照实例ID降序排序(1表示升序, -1表示降序)"
          },
          {
            "name": "permission",
            "type": "string[]",
            "description": "按照权限过滤(通用实例都有`read`, `update`, `delete`权限控制, 主机实例在通用实例权限基础上有额外的`operate`权限, 应用实例在通用实例权限基础上有额外的`developClusterOperate`, `testClusterOperate`, `prereleaseClusterOperate`, `productionClusterOperate`权限)"
          },
          {
            "name": "only_relation_view",
            "type": "bool",
            "description": "对于关联的实例数据是否只获取relation_view中指定的属性, 这个字段为true时, 会覆盖fields字段中指定的二级字段设置"
          },
          {
            "name": "only_my_instance",
            "type": "bool",
            "description": "是否只获取与自己有关的那部分数据, 默认为false"
          },
          {
            "name": "include_sub_systems",
            "type": "bool",
            "description": "是否包含子系统以及子系统的子系统的应用"
          }
        ],
        "required": ["systemInstanceId"],
        "default": {
          "page": 1,
          "page_size": 30,
          "only_relation_view": false,
          "only_my_instance": false,
          "include_sub_systems": true
        }
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "total",
            "type": "int",
            "description": "total"
          },
          {
            "name": "page",
            "type": "page",
            "description": "page"
          },
          {
            "name": "page_size",
            "type": "page_size",
            "description": "page_size"
          },
          {
            "name": "list",
            "type": "map[]",
            "description": "实例列表"
          }
        ],
        "required": ["total", "page", "page_size", "list"]
      }
    },
    {
      "contract": "cmdb.business_instance.SearchSubSystem",
      "name": "SearchSubSystem",
      "version": "1.0.0",
      "description": "搜索系统的子系统以及，以及递归的获取子系统的子系统",
      "detail": "关于搜索条件的文档说明请参考[实例搜索接口]的说明",
      "endpoint": {
        "method": "POST",
        "uri": "/system/:systemInstanceId/_search_subsystem"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "systemInstanceId",
            "type": "instance_id",
            "description": "系统的实例ID"
          },
          {
            "name": "page",
            "type": "page",
            "description": "页码"
          },
          {
            "name": "page_size",
            "type": "page_size",
            "description": "页大小"
          },
          {
            "name": "query",
            "type": "map",
            "description": "查询条件,与[实例搜索接口]的query字段说明一致"
          },
          {
            "name": "fields",
            "type": "map",
            "description": "过滤的字段列表, 留空代表返回所有字段(true: 表示指定获取字段, false: 表示指定不获取的字段)(支持关系数据的二级jsonPath格式的指定字段如clusters.name)"
          },
          {
            "name": "sort",
            "type": "map",
            "description": "按字段排序, 留空默认按照实例ID降序排序(1表示升序, -1表示降序)"
          },
          {
            "name": "permission",
            "type": "string[]",
            "description": "按照权限过滤(通用实例都有`read`, `update`, `delete`权限控制, 主机实例在通用实例权限基础上有额外的`operate`权限, 应用实例在通用实例权限基础上有额外的`developClusterOperate`, `testClusterOperate`, `prereleaseClusterOperate`, `productionClusterOperate`权限)"
          },
          {
            "name": "only_relation_view",
            "type": "bool",
            "description": "对于关联的实例数据是否只获取relation_view中指定的属性, 这个字段为true时, 会覆盖fields字段中指定的二级字段设置"
          },
          {
            "name": "only_my_instance",
            "type": "bool",
            "description": "是否只获取与自己有关的那部分数据, 默认为false"
          }
        ],
        "default": {
          "page": 1,
          "page_size": 30,
          "only_relation_view": false,
          "only_my_instance": false
        }
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "total",
            "type": "int",
            "description": "total"
          },
          {
            "name": "page",
            "type": "page",
            "description": "page"
          },
          {
            "name": "page_size",
            "type": "page_size",
            "description": "page_size"
          },
          {
            "name": "list",
            "type": "map[]",
            "description": "实例列表"
          }
        ],
        "required": ["total", "page", "page_size", "list"]
      }
    },
    {
      "contract": "cmdb.cmdb_object.AlertNotifyDenied",
      "name": "AlertNotifyDenied",
      "version": "1.0.0",
      "description": "模型,属性及关系变更记录配置",
      "endpoint": {
        "method": "post",
        "uri": "/object_notify_denied/:object_id"
      },
      "import": [
        "easyops/model/cmdb/cmdb_object",
        "easyops/model/cmdb/notify_denied"
      ],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "object_id",
            "type": "object_id",
            "description": "模型Id"
          },
          {
            "ref": "CmdbObject.notifyDenied"
          },
          {
            "name": "attrList",
            "type": "NotifyDenied[]",
            "description": "属性notifyDenied信息"
          },
          {
            "name": "relationList",
            "type": "NotifyDenied[]",
            "description": "关系notifyDenied信息"
          }
        ],
        "required": ["object_id", "CmdbObject.notifyDenied"]
      },
      "response": null
    },
    {
      "contract": "cmdb.cmdb_object.AlertWordIndex",
      "name": "AlertWordIndex",
      "version": "1.0.0",
      "description": "模型及属性全文索引配置",
      "endpoint": {
        "method": "post",
        "uri": "/object_word_index/:object_id"
      },
      "import": [
        "easyops/model/cmdb/cmdb_object",
        "easyops/model/cmdb/word_index_denied"
      ],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "object_id",
            "type": "object_id",
            "description": "模型Id"
          },
          {
            "ref": "CmdbObject.wordIndexDenied"
          },
          {
            "name": "attrList",
            "type": "WordIndexDenied[]",
            "description": "属性wordIndexDenied信息"
          }
        ],
        "required": ["object_id", "CmdbObject.wordIndexDenied", "attrList"]
      },
      "response": null
    },
    {
      "contract": "cmdb.cmdb_object.BatchListRelationQueryStrategyV2Request",
      "name": "BatchListRelationQueryStrategyV2Request",
      "version": "2.0.0",
      "description": "批量获取模型查询策略v2",
      "endpoint": {
        "method": "GET",
        "uri": "/v2/batch/object/relation_query_strategy"
      },
      "import": ["easyops/model/cmdb/relation_query_strategy_v2"],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "object_ids",
            "type": "string",
            "description": "多个模型ID，以逗号分隔"
          },
          {
            "name": "type",
            "type": "string",
            "description": "策略类型"
          },
          {
            "name": "name",
            "type": "string",
            "description": "策略名称(模糊匹配)"
          }
        ]
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "strategy_data",
            "type": "object[]",
            "fields": [
              {
                "name": "object_id",
                "type": "string",
                "description": "模型ID"
              },
              {
                "name": "strategy_list",
                "type": "RelationQueryStrategyV2[]",
                "description": "策略列表"
              }
            ],
            "description": "各模型策略数据"
          }
        ]
      }
    },
    {
      "contract": "cmdb.cmdb_object.BatchUpdate",
      "name": "BatchUpdate",
      "version": "1.0.0",
      "description": "批量更新模型",
      "endpoint": {
        "method": "PUT",
        "uri": "/batch/object"
      },
      "import": ["easyops/model/cmdb/cmdb_object"],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "data",
            "type": "object[]",
            "fields": [
              {
                "name": "objectId",
                "type": "object_id",
                "description": "资源模型ID"
              },
              {
                "name": "info",
                "type": "object",
                "fields": [
                  {
                    "ref": "CmdbObject.name"
                  },
                  {
                    "ref": "CmdbObject.icon"
                  },
                  {
                    "ref": "CmdbObject.category"
                  },
                  {
                    "ref": "CmdbObject.memo"
                  },
                  {
                    "ref": "CmdbObject.view"
                  },
                  {
                    "ref": "CmdbObject.updateAuthorizers"
                  },
                  {
                    "ref": "CmdbObject.deleteAuthorizers"
                  }
                ],
                "description": "模型信息"
              }
            ],
            "description": "body"
          }
        ],
        "required": ["data.objectId", "data.info"]
      },
      "response": {
        "wrapper": false,
        "type": "object",
        "fields": [
          {
            "name": "code",
            "type": "int",
            "description": "返回码"
          },
          {
            "name": "error",
            "type": "string",
            "description": "错误信息"
          },
          {
            "name": "message",
            "type": "string",
            "description": "返回消息"
          },
          {
            "name": "data",
            "type": "object[]",
            "fields": [
              {
                "name": "objectId",
                "type": "object_id",
                "description": "模型Id"
              },
              {
                "name": "code",
                "type": "int",
                "description": "错误码"
              },
              {
                "name": "message",
                "type": "string",
                "description": "错误信息"
              }
            ],
            "description": "返回数据"
          }
        ]
      }
    },
    {
      "contract": "cmdb.cmdb_object.Create",
      "name": "Create",
      "version": "1.0.0",
      "description": "创建模型",
      "endpoint": {
        "method": "POST",
        "uri": "/object"
      },
      "import": ["easyops/model/cmdb/cmdb_object"],
      "request": {
        "type": "object",
        "fields": [
          {
            "ref": "CmdbObject.objectId"
          },
          {
            "ref": "CmdbObject.name"
          },
          {
            "ref": "CmdbObject.icon"
          },
          {
            "ref": "CmdbObject.category"
          },
          {
            "ref": "CmdbObject.memo"
          },
          {
            "ref": "CmdbObject.view"
          },
          {
            "ref": "CmdbObject.isAbstract"
          },
          {
            "ref": "CmdbObject.parentObjectId"
          },
          {
            "ref": "CmdbObject.parentObjectIds"
          },
          {
            "ref": "CmdbObject.notifyDenied"
          },
          {
            "ref": "CmdbObject.wordIndexDenied"
          },
          {
            "ref": "CmdbObject.permissionDenied"
          },
          {
            "ref": "CmdbObject.system"
          },
          {
            "ref": "CmdbObject.readAuthorizers"
          },
          {
            "ref": "CmdbObject.updateAuthorizers"
          },
          {
            "ref": "CmdbObject.deleteAuthorizers"
          }
        ],
        "required": ["CmdbObject.objectId", "CmdbObject.name"]
      },
      "response": {
        "type": "CmdbObject"
      }
    },
    {
      "contract": "cmdb.cmdb_object.CreateRelationQueryStrategyV2",
      "name": "CreateRelationQueryStrategyV2",
      "version": "2.0.0",
      "description": "创建查询策略v2",
      "endpoint": {
        "method": "POST",
        "uri": "/v2/object/:object_id/relation_query_strategy",
        "ext_fields": [
          {
            "name": "body",
            "source": "body"
          }
        ]
      },
      "import": ["easyops/model/cmdb/relation_query_strategy_v2"],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "object_id",
            "type": "object_id",
            "description": "模型ID"
          },
          {
            "name": "body",
            "type": "object",
            "fields": [
              {
                "ref": "RelationQueryStrategyV2.id"
              },
              {
                "ref": "RelationQueryStrategyV2.byPath"
              },
              {
                "ref": "RelationQueryStrategyV2.name"
              },
              {
                "ref": "RelationQueryStrategyV2.type"
              },
              {
                "ref": "RelationQueryStrategyV2.path_list"
              },
              {
                "ref": "RelationQueryStrategyV2.readAuthorizers"
              },
              {
                "ref": "RelationQueryStrategyV2.updateAuthorizers"
              },
              {
                "ref": "RelationQueryStrategyV2.deleteAuthorizers"
              }
            ],
            "description": "策略数据"
          }
        ],
        "required": ["object_id", "body.name", "body.path_list"]
      },
      "response": {
        "type": "RelationQueryStrategyV2"
      }
    },
    {
      "contract": "cmdb.cmdb_object.DeleteObject",
      "name": "DeleteObject",
      "version": "1.1.0",
      "description": "删除模型",
      "endpoint": {
        "method": "DELETE",
        "uri": "/object/:objectId"
      },
      "import": ["easyops/model/cmdb/cmdb_object"],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "objectId",
            "type": "object_id",
            "description": "模型对象ID"
          }
        ]
      },
      "response": {
        "type": "CmdbObject"
      }
    },
    {
      "contract": "cmdb.cmdb_object.DeleteProperty",
      "name": "DeleteProperty",
      "version": "1.1.0",
      "description": "删除模型属性",
      "endpoint": {
        "method": "DELETE",
        "uri": "/object/:objectId/attr/:attrId"
      },
      "import": ["easyops/model/cmdb/object_attr"],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "objectId",
            "type": "object_id",
            "description": "模型Id"
          },
          {
            "name": "attrId",
            "type": "attr_id",
            "description": "属性id"
          }
        ],
        "required": ["objectId", "attrId"]
      },
      "response": {
        "type": "ObjectAttr"
      }
    },
    {
      "contract": "cmdb.cmdb_object.DeleteRelationQueryStrategyV2",
      "name": "DeleteRelationQueryStrategyV2",
      "version": "2.0.0",
      "description": "删除查询策略v2",
      "endpoint": {
        "method": "DELETE",
        "uri": "/v2/object/:object_id/relation_query_strategy/:id"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "object_id",
            "type": "object_id",
            "description": "模型ID"
          },
          {
            "name": "id",
            "type": "string",
            "description": "策略id"
          }
        ],
        "required": ["object_id", "id"]
      },
      "response": null
    },
    {
      "contract": "cmdb.cmdb_object.ExportObject",
      "name": "ExportObject",
      "version": "1.1.0",
      "description": "模型导出",
      "endpoint": {
        "method": "get",
        "uri": "/object_export"
      },
      "import": ["easyops/model/cmdb/cmdb_object"],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "object_ids",
            "type": "string",
            "description": "资源模型ID,用分号隔开;为空时查询所有的资源模型"
          }
        ],
        "required": ["object_ids"]
      },
      "response": {
        "wrapper": false,
        "type": "object",
        "fields": [
          {
            "name": "data",
            "type": "CmdbObject[]",
            "description": "模型列表"
          },
          {
            "name": "code",
            "type": "int",
            "description": "返回码"
          },
          {
            "name": "error",
            "type": "string",
            "description": "错误消息"
          },
          {
            "name": "message",
            "type": "string",
            "description": "返回信息"
          }
        ]
      }
    },
    {
      "contract": "cmdb.cmdb_object.ExportObjectV2",
      "name": "ExportObjectV2",
      "version": "1.1.0",
      "description": "模型导出V2",
      "endpoint": {
        "method": "post",
        "uri": "/v2/object_export"
      },
      "import": ["easyops/model/cmdb/cmdb_object"],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "objectIds",
            "type": "object_id[]",
            "description": "资源模型ID列表"
          }
        ],
        "required": ["objectIds"]
      },
      "response": {
        "wrapper": false,
        "type": "object",
        "fields": [
          {
            "name": "data",
            "type": "CmdbObject[]",
            "description": "模型列表"
          },
          {
            "name": "code",
            "type": "int",
            "description": "返回码"
          },
          {
            "name": "error",
            "type": "string",
            "description": "错误消息"
          },
          {
            "name": "message",
            "type": "string",
            "description": "返回信息"
          }
        ]
      }
    },
    {
      "contract": "cmdb.cmdb_object.GetDetail",
      "name": "GetDetail",
      "version": "1.1.0",
      "description": "获取模型详情",
      "endpoint": {
        "method": "get",
        "uri": "/object/:objectId"
      },
      "import": ["easyops/model/cmdb/cmdb_object"],
      "request": {
        "type": "object",
        "fields": [
          {
            "ref": "CmdbObject.objectId"
          },
          {
            "name": "ignoreAttrPermission",
            "type": "bool",
            "description": "忽略模型字段权限校验"
          }
        ],
        "default": {
          "ignoreAttrPermission": false
        }
      },
      "response": {
        "type": "CmdbObject"
      }
    },
    {
      "contract": "cmdb.cmdb_object.GetIdMapName",
      "name": "GetIdMapName",
      "version": "1.0.0",
      "description": "获取模型id和name映射",
      "endpoint": {
        "method": "GET",
        "uri": "/object_id_map_name"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "objectIds",
            "type": "string",
            "description": "模型Id, 使用,分隔"
          },
          {
            "name": "system",
            "type": "string",
            "description": "system"
          },
          {
            "name": "category",
            "type": "string",
            "description": "分类"
          },
          {
            "name": "emptySystem",
            "type": "bool",
            "description": "system是否为空，为true时会忽略参数system"
          }
        ],
        "default": {
          "emptySystem": false
        }
      },
      "response": {
        "type": "map"
      }
    },
    {
      "contract": "cmdb.cmdb_object.GetObjectAll",
      "name": "GetObjectAll",
      "version": "1.3.0",
      "description": "获取所有模型",
      "endpoint": {
        "method": "GET",
        "uri": "/object_all"
      },
      "import": [
        "easyops/model/cmdb/cmdb_object",
        "easyops/model/cmdb/list_object_request"
      ],
      "request": {
        "type": "object",
        "fields": [
          {
            "ref": "ListObjectRequest.*"
          },
          {
            "name": "ignoreAttrPermission",
            "type": "bool",
            "description": "忽略模型字段权限校验"
          }
        ],
        "default": {
          "ignoreAttrPermission": false
        }
      },
      "response": {
        "wrapper": false,
        "type": "object",
        "fields": [
          {
            "name": "code",
            "type": "int",
            "description": "返回码"
          },
          {
            "name": "error",
            "type": "string",
            "description": "错误信息"
          },
          {
            "name": "message",
            "type": "string",
            "description": "返回消息"
          },
          {
            "name": "data",
            "type": "CmdbObject[]",
            "description": "模型列表"
          }
        ],
        "required": ["code", "error", "message", "data"]
      }
    },
    {
      "contract": "cmdb.cmdb_object.GetObjectAuthorizers",
      "name": "GetObjectAuthorizers",
      "version": "1.0.0",
      "description": "获取模型的白名单属性",
      "endpoint": {
        "method": "GET",
        "uri": "/object/:objectId/authorizers"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "objectId",
            "type": "object_id",
            "description": "模型Id"
          }
        ],
        "required": ["objectId"]
      },
      "response": {
        "wrapper": false,
        "type": "object",
        "fields": [
          {
            "name": "code",
            "type": "int",
            "description": "返回码"
          },
          {
            "name": "error",
            "type": "string",
            "description": "错误信息"
          },
          {
            "name": "message",
            "type": "string",
            "description": "返回消息"
          },
          {
            "name": "data",
            "type": "object[]",
            "fields": [
              {
                "name": "authorizersKey",
                "type": "string",
                "description": "白名单key"
              },
              {
                "name": "action",
                "type": "string",
                "description": "对应权限点action"
              },
              {
                "name": "remark",
                "type": "string",
                "description": "白名单描述"
              }
            ],
            "description": "列表"
          }
        ],
        "required": ["code", "error", "message", "data"]
      }
    },
    {
      "contract": "cmdb.cmdb_object.GetObjectBasicAll",
      "name": "GetObjectBasicAll",
      "version": "1.3.0",
      "description": "获取所有模型基本信息",
      "endpoint": {
        "method": "GET",
        "uri": "/object_basic_all"
      },
      "import": [
        "easyops/model/cmdb/object_basic_info",
        "easyops/model/cmdb/list_object_request"
      ],
      "request": {
        "type": "ListObjectRequest"
      },
      "response": {
        "wrapper": false,
        "type": "object",
        "fields": [
          {
            "name": "code",
            "type": "int",
            "description": "返回码"
          },
          {
            "name": "error",
            "type": "string",
            "description": "错误信息"
          },
          {
            "name": "message",
            "type": "string",
            "description": "返回消息"
          },
          {
            "name": "data",
            "type": "ObjectBasicInfo[]",
            "description": "模型列表"
          }
        ],
        "required": ["code", "error", "message", "data"]
      }
    },
    {
      "contract": "cmdb.cmdb_object.GetObjectRef",
      "name": "GetObjectRef",
      "version": "1.1.0",
      "description": "查出与指定模型有直接关联的模型",
      "endpoint": {
        "method": "GET",
        "uri": "/object_ref"
      },
      "import": ["easyops/model/cmdb/cmdb_object"],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "ref_object",
            "type": "string",
            "description": "关联模型id，多个用逗号分隔"
          }
        ],
        "required": ["ref_object"]
      },
      "response": {
        "wrapper": false,
        "type": "object",
        "fields": [
          {
            "name": "code",
            "type": "int",
            "description": "返回码"
          },
          {
            "name": "error",
            "type": "string",
            "description": "错误信息"
          },
          {
            "name": "message",
            "type": "string",
            "description": "返回消息"
          },
          {
            "name": "data",
            "type": "CmdbObject[]",
            "description": "模型列表"
          }
        ],
        "required": ["code", "error", "message", "data"]
      }
    },
    {
      "contract": "cmdb.cmdb_object.GetObjectRelationPath",
      "name": "GetObjectRelationPath",
      "version": "1.0.0",
      "description": "获取资源模型路径列表",
      "endpoint": {
        "method": "GET",
        "uri": "/object_relation_path"
      },
      "import": ["easyops/model/cmdb/strategy_path_node_basic"],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "src_object_id",
            "type": "object_id",
            "description": "路径起始资源模型ID"
          },
          {
            "name": "dst_object_id",
            "type": "object_id",
            "description": "路径结束资源模型ID"
          },
          {
            "name": "max_depth",
            "type": "int",
            "description": "搜索路径最大深度"
          },
          {
            "name": "max_sub_node",
            "type": "int",
            "description": "搜索最大模型数"
          },
          {
            "name": "with_cycle",
            "type": "bool",
            "description": "是否带环搜索，默认false"
          },
          {
            "name": "white_list",
            "type": "string",
            "description": "必须按序经过的模型，多个以分号分隔， 如APP;HOST"
          },
          {
            "name": "black_list",
            "type": "string",
            "description": "屏蔽的模型，多个以分号分隔， 如APP;HOST"
          },
          {
            "name": "show_inherit_node",
            "type": "bool",
            "description": "若节点关联抽象关系，是否展示关联的子模型节点"
          }
        ],
        "required": ["src_object_id", "dst_object_id"],
        "default": {
          "max_depth": 5,
          "max_sub_node": 100,
          "with_cycle": false,
          "show_inherit_node": false
        }
      },
      "response": {
        "wrapper": false,
        "type": "object",
        "fields": [
          {
            "name": "code",
            "type": "int",
            "description": "返回码"
          },
          {
            "name": "error",
            "type": "string",
            "description": "错误信息"
          },
          {
            "name": "message",
            "type": "string",
            "description": "返回消息"
          },
          {
            "name": "data",
            "type": "object[]",
            "fields": [
              {
                "name": "id",
                "type": "string",
                "description": "自动生成哈希id"
              },
              {
                "name": "label",
                "type": "string",
                "description": "路径描述"
              },
              {
                "name": "path",
                "type": "StrategyPathNodeBasic[]",
                "description": "路径"
              }
            ],
            "description": "路径列表"
          }
        ],
        "required": ["code", "error", "message", "data"]
      }
    },
    {
      "contract": "cmdb.cmdb_object.GetObjectRelationRelatedKey",
      "name": "GetObjectRelationRelatedKey",
      "version": "1.0.0",
      "description": "获取资源模型路径实例查询key",
      "endpoint": {
        "method": "GET",
        "uri": "/object_relation_related_key"
      },
      "import": ["easyops/model/cmdb/strategy_path_node_basic"],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "src_object_id",
            "type": "object_id",
            "description": "路径起始资源模型ID"
          },
          {
            "name": "dst_object_id",
            "type": "object_id",
            "description": "路径结束资源模型ID"
          },
          {
            "name": "max_depth",
            "type": "int",
            "description": "搜索路径最大深度"
          },
          {
            "name": "max_sub_node",
            "type": "int",
            "description": "搜索最大模型数"
          },
          {
            "name": "with_cycle",
            "type": "bool",
            "description": "是否带环搜索，默认false"
          },
          {
            "name": "white_list",
            "type": "string",
            "description": "必须按序经过的模型，多个以分号分隔， 如APP;HOST"
          },
          {
            "name": "black_list",
            "type": "string",
            "description": "屏蔽的模型，多个以分号分隔， 如APP;HOST"
          },
          {
            "name": "show_inherit_node",
            "type": "bool",
            "description": "若节点关联抽象关系，是否展示关联的子模型节点"
          }
        ],
        "required": ["src_object_id", "dst_object_id"],
        "default": {
          "max_depth": 5,
          "max_sub_node": 100,
          "with_cycle": false,
          "show_inherit_node": false
        }
      },
      "response": {
        "wrapper": false,
        "type": "object",
        "fields": [
          {
            "name": "code",
            "type": "int",
            "description": "返回码"
          },
          {
            "name": "error",
            "type": "string",
            "description": "错误信息"
          },
          {
            "name": "message",
            "type": "string",
            "description": "返回消息"
          },
          {
            "name": "data",
            "type": "object[]",
            "fields": [
              {
                "name": "id",
                "type": "string",
                "description": "自动生成哈希id"
              },
              {
                "name": "label",
                "type": "string",
                "description": "路径描述"
              },
              {
                "name": "reverseQueryKey",
                "type": "string",
                "description": "query条件key"
              },
              {
                "name": "path",
                "type": "StrategyPathNodeBasic[]",
                "description": "路径"
              }
            ],
            "description": "路径列表"
          }
        ],
        "required": ["code", "error", "message", "data"]
      }
    },
    {
      "contract": "cmdb.cmdb_object.ObjectSnapshot",
      "name": "ObjectSnapshot",
      "version": "1.1.0",
      "description": "查询指定版本模型快照",
      "endpoint": {
        "method": "GET",
        "uri": "/history/object/:object_id"
      },
      "import": ["easyops/model/cmdb/cmdb_object"],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "object_id",
            "type": "object_id",
            "description": "模型对象ID"
          },
          {
            "name": "_version",
            "type": "int",
            "description": "版本号(-1表示查询最新版本)"
          }
        ],
        "required": ["object_id", "_version"]
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "ref": "CmdbObject.*"
          },
          {
            "name": "_id",
            "type": "string",
            "description": "快照ID"
          }
        ]
      }
    },
    {
      "contract": "cmdb.cmdb_object.GetProperty",
      "name": "GetProperty",
      "version": "1.1.0",
      "description": "获取模型属性",
      "endpoint": {
        "method": "GET",
        "uri": "/object/:objectId/attr/:attrId"
      },
      "import": ["easyops/model/cmdb/object_attr"],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "objectId",
            "type": "object_id",
            "description": "模型Id"
          },
          {
            "name": "attrId",
            "type": "attr_id",
            "description": "属性id"
          }
        ],
        "required": ["objectId", "attrId"]
      },
      "response": {
        "type": "ObjectAttr"
      }
    },
    {
      "contract": "cmdb.cmdb_object.GetRelationQueryStrategyV2",
      "name": "GetRelationQueryStrategyV2",
      "version": "2.0.0",
      "description": "获取单个查询策略v2",
      "endpoint": {
        "method": "GET",
        "uri": "/v2/object/:object_id/relation_query_strategy/:id"
      },
      "import": ["easyops/model/cmdb/relation_query_strategy_v2"],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "object_id",
            "type": "object_id",
            "description": "模型ID"
          },
          {
            "name": "id",
            "type": "string",
            "description": "策略id"
          }
        ],
        "required": ["object_id", "id"]
      },
      "response": {
        "type": "RelationQueryStrategyV2"
      }
    },
    {
      "contract": "cmdb.cmdb_object.ImportCheck",
      "name": "ImportCheck",
      "version": "1.1.0",
      "description": "import objects check",
      "detail": "批量导入模型前校验请求的数据是否合法",
      "endpoint": {
        "method": "POST",
        "uri": "/object_import_check",
        "ext_fields": [
          {
            "name": "body",
            "source": "body"
          }
        ]
      },
      "import": ["easyops/model/cmdb/object_import"],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "body",
            "type": "ObjectImport[]",
            "description": "模型列表"
          }
        ],
        "required": ["body"]
      },
      "response": {
        "type": "object",
        "wrapper": false,
        "fields": [
          {
            "name": "code",
            "type": "int",
            "description": "返回码"
          },
          {
            "name": "error",
            "type": "string",
            "description": "错误信息"
          },
          {
            "name": "message",
            "type": "string",
            "description": "返回消息"
          },
          {
            "name": "data",
            "type": "map",
            "description": "'{ \"APP\": { \"duplicated_relations\": [ {\"relation_id\": \"APP_cluster_CLUSTER\", \"left_id\": \"clusters\", \"right_id\": \"app\"} ], \"cannot_created_relations\": [ {\"relation_id\": \"APP_cluster_CLUSTER\", \"left_id\": \"clusters\", \"right_id\": \"app\"} ], \"cannot_created_references\": [ {\"id\":\"cpu\",\"name\":\"CPU信息\",\"value\":{\"type\":\"FK\",\"external\":[{\"org_attr\":\"name\",\"name\":\"名称\"}],\"rule\":{\"obj\":\"HOST_CPU\",\"mode\":\"inner\"}}} ], \"id_is_duplicated\": true, \"name_is_duplicated\": true } }'"
          }
        ]
      }
    },
    {
      "contract": "cmdb.cmdb_object.ImportCheckV2",
      "name": "ImportCheckV2",
      "version": "1.2.0",
      "description": "批量导入模型检查v2",
      "endpoint": {
        "method": "POST",
        "uri": "/v2/object_import_check"
      },
      "import": [
        "easyops/model/cmdb/cmdb_object",
        "easyops/model/cmdb/import_result"
      ],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "object_list",
            "type": "CmdbObject[]",
            "description": "模型列表"
          },
          {
            "name": "ignore_dst_relation",
            "type": "bool",
            "description": "忽略对端关系不存在错误"
          }
        ],
        "required": ["object_list"],
        "default": {
          "ignore_dst_relation": true
        }
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "import_result",
            "type": "ImportResult[]",
            "description": "导入结果列表"
          }
        ],
        "required": ["import_result"]
      }
    },
    {
      "contract": "cmdb.cmdb_object.ImportObject",
      "name": "ImportObject",
      "version": "1.1.0",
      "description": "批量导入模型",
      "detail": "批量导入模型",
      "endpoint": {
        "method": "POST",
        "uri": "/object_import",
        "ext_fields": [
          {
            "name": "body",
            "source": "body"
          }
        ]
      },
      "import": ["easyops/model/cmdb/object_import"],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "body",
            "type": "ObjectImport[]",
            "description": "模型列表"
          }
        ],
        "required": ["body"]
      },
      "response": {
        "wrapper": false,
        "type": "object",
        "fields": [
          {
            "name": "code",
            "type": "int",
            "description": "返回码"
          },
          {
            "name": "error",
            "type": "string",
            "description": "错误信息"
          },
          {
            "name": "message",
            "type": "string",
            "description": "返回消息"
          },
          {
            "name": "data",
            "type": "object[]",
            "fields": [
              {
                "name": "objectId",
                "type": "object_id",
                "description": "模型Id"
              },
              {
                "name": "name",
                "type": "string",
                "description": "模型名字"
              },
              {
                "name": "code",
                "type": "int",
                "description": "错误码"
              },
              {
                "name": "error",
                "type": "string",
                "description": "错误信息"
              },
              {
                "name": "attrList",
                "type": "object[]",
                "fields": [
                  {
                    "name": "id",
                    "type": "object_attr_id",
                    "description": "属性Id"
                  },
                  {
                    "name": "name",
                    "type": "string",
                    "description": "属性名字"
                  },
                  {
                    "name": "code",
                    "type": "int",
                    "description": "错误码"
                  },
                  {
                    "name": "error",
                    "type": "string",
                    "description": "错误信息"
                  }
                ],
                "description": "属性列表"
              },
              {
                "name": "relation_list",
                "type": "object[]",
                "fields": [
                  {
                    "name": "relation_id",
                    "type": "object_relation_id",
                    "description": "关系Id"
                  },
                  {
                    "name": "left_description",
                    "type": "string",
                    "description": "关系左端描述"
                  },
                  {
                    "name": "right_description",
                    "type": "string",
                    "description": "关系右端描述"
                  },
                  {
                    "name": "left_name",
                    "type": "string",
                    "description": "关系左端名称"
                  },
                  {
                    "name": "right_name",
                    "type": "string",
                    "description": "关系右端名称"
                  },
                  {
                    "name": "code",
                    "type": "int",
                    "description": "错误码"
                  },
                  {
                    "name": "error",
                    "type": "string",
                    "description": "错误信息"
                  }
                ],
                "description": "关系列表"
              }
            ],
            "description": "结果"
          }
        ],
        "required": ["code", "error", "message", "data"]
      }
    },
    {
      "contract": "cmdb.cmdb_object.ImportV2",
      "name": "ImportV2",
      "version": "1.1.0",
      "description": "批量导入模型v2",
      "endpoint": {
        "method": "POST",
        "uri": "/v2/object_import"
      },
      "import": [
        "easyops/model/cmdb/cmdb_object",
        "easyops/model/cmdb/import_result"
      ],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "ignore_dst_relation",
            "type": "bool",
            "description": "忽略对端关系不存在错误"
          },
          {
            "name": "object_list",
            "type": "CmdbObject[]",
            "description": "模型列表"
          }
        ],
        "required": ["object_list"]
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "import_result",
            "type": "ImportResult[]",
            "description": "导入结果列表"
          }
        ],
        "required": ["import_result"]
      }
    },
    {
      "contract": "cmdb.cmdb_object.List",
      "name": "List",
      "version": "1.3.0",
      "description": "获取模型列表",
      "endpoint": {
        "method": "LIST",
        "uri": "/object"
      },
      "import": [
        "easyops/model/cmdb/cmdb_object",
        "easyops/model/cmdb/list_object_request"
      ],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "page",
            "type": "page",
            "description": "页码"
          },
          {
            "name": "page_size",
            "type": "page_size",
            "description": "页大小"
          },
          {
            "ref": "ListObjectRequest.*"
          },
          {
            "name": "ignoreAttrPermission",
            "type": "bool",
            "description": "忽略模型字段权限校验"
          }
        ],
        "default": {
          "ignoreAttrPermission": false
        }
      },
      "response": {
        "type": "CmdbObject"
      }
    },
    {
      "contract": "cmdb.cmdb_object.ListChildObject",
      "name": "ListChildObject",
      "version": "1.1.0",
      "description": "获取某个模型所有关联子模型",
      "endpoint": {
        "method": "get",
        "uri": "/object/:objectId/child"
      },
      "import": ["easyops/model/cmdb/cmdb_object"],
      "request": {
        "type": "object",
        "fields": [
          {
            "ref": "CmdbObject.objectId"
          },
          {
            "name": "ignoreAttrPermission",
            "type": "bool",
            "description": "忽略模型字段权限校验"
          }
        ],
        "default": {
          "ignoreAttrPermission": false
        }
      },
      "response": {
        "wrapper": false,
        "type": "object",
        "fields": [
          {
            "name": "code",
            "type": "int",
            "description": "返回码"
          },
          {
            "name": "error",
            "type": "string",
            "description": "错误信息"
          },
          {
            "name": "message",
            "type": "string",
            "description": "返回消息"
          },
          {
            "name": "data",
            "type": "CmdbObject[]",
            "description": "模型列表"
          }
        ],
        "required": ["code", "error", "message", "data"]
      }
    },
    {
      "contract": "cmdb.cmdb_object.ListObjectBasic",
      "name": "ListObjectBasic",
      "version": "1.1.0",
      "description": "获取模型基本信息列表",
      "endpoint": {
        "method": "LIST",
        "uri": "/object_basic"
      },
      "import": [
        "easyops/model/cmdb/object_basic_info",
        "easyops/model/cmdb/list_object_request"
      ],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "page",
            "type": "page",
            "description": "页码"
          },
          {
            "name": "page_size",
            "type": "page_size",
            "description": "页大小"
          },
          {
            "ref": "ListObjectRequest.*"
          }
        ]
      },
      "response": {
        "type": "ObjectBasicInfo"
      }
    },
    {
      "contract": "cmdb.cmdb_object.ListObjectCategory",
      "name": "ListObjectCategory",
      "version": "1.1.0",
      "description": "获取模型分类信息",
      "endpoint": {
        "method": "GET",
        "uri": "/object_category"
      },
      "import": ["easyops/model/cmdb/list_object_request"],
      "request": {
        "type": "object",
        "fields": [
          {
            "ref": "ListObjectRequest.visible"
          }
        ]
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "list",
            "type": "object[]",
            "fields": [
              {
                "name": "name",
                "type": "string",
                "description": "一级分类"
              },
              {
                "name": "child",
                "type": "string[]",
                "description": "二级分类"
              },
              {
                "name": "hasRoot",
                "type": "bool",
                "description": "存在只有一级分类的模型"
              }
            ],
            "description": "分类信息"
          }
        ]
      }
    },
    {
      "contract": "cmdb.cmdb_object.ListObjectFields",
      "name": "ListObjectFields",
      "version": "1.0.0",
      "description": "获取某个模型字段及关系的字段",
      "endpoint": {
        "method": "get",
        "uri": "/object/:objectId/fields"
      },
      "import": ["easyops/model/cmdb/object_field"],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "objectId",
            "type": "object_id",
            "description": "模型id"
          },
          {
            "name": "depth",
            "type": "int",
            "description": "关系字段显示层级"
          }
        ],
        "required": ["depth"],
        "default": {
          "depth": 1
        }
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "fields",
            "type": "ObjectField[]",
            "description": "模型字段列表"
          },
          {
            "name": "relateObjects",
            "type": "object[]",
            "fields": [
              {
                "name": "objectId",
                "type": "object_id",
                "description": "模型id"
              },
              {
                "name": "fields",
                "type": "ObjectField[]",
                "description": "模型字段列表"
              }
            ],
            "description": "关联模型字段"
          }
        ]
      }
    },
    {
      "contract": "cmdb.cmdb_object.ListRelationQueryStrategyV2Request",
      "name": "ListRelationQueryStrategyV2Request",
      "version": "2.0.0",
      "description": "获取查询策略v2",
      "endpoint": {
        "method": "GET",
        "uri": "/v2/object/:object_id/relation_query_strategy"
      },
      "import": ["easyops/model/cmdb/relation_query_strategy_v2"],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "object_id",
            "type": "object_id",
            "description": "模型ID"
          },
          {
            "name": "type",
            "type": "string",
            "description": "策略类型"
          }
        ],
        "required": ["object_id"]
      },
      "response": {
        "wrapper": false,
        "type": "object",
        "fields": [
          {
            "name": "code",
            "type": "int",
            "description": "返回码"
          },
          {
            "name": "error",
            "type": "string",
            "description": "页码"
          },
          {
            "name": "message",
            "type": "string",
            "description": "返回信息"
          },
          {
            "name": "data",
            "type": "RelationQueryStrategyV2[]",
            "description": "数据"
          }
        ]
      }
    },
    {
      "contract": "cmdb.cmdb_object.ObjectConflictCheck",
      "name": "ObjectConflictCheck",
      "version": "1.1.0",
      "description": "模型冲突检查",
      "endpoint": {
        "method": "POST",
        "uri": "/object_conflict_check"
      },
      "import": [
        "easyops/model/cmdb/cmdb_object",
        "easyops/model/cmdb/import_result"
      ],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "import_object_list",
            "type": "CmdbObject[]",
            "description": "导入模型列表"
          },
          {
            "name": "compare_object_list",
            "type": "CmdbObject[]",
            "description": "对比模型列表"
          }
        ],
        "required": ["import_object_list", "compare_object_list"]
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "import_result",
            "type": "ImportResult[]",
            "description": "检查结果列表"
          }
        ],
        "required": ["import_result"]
      }
    },
    {
      "contract": "cmdb.cmdb_object.Update",
      "name": "Update",
      "version": "1.1.0",
      "description": "更新模型",
      "endpoint": {
        "method": "PUT",
        "uri": "/object/:objectId",
        "ext_fields": [
          {
            "name": "body",
            "source": "body"
          }
        ]
      },
      "import": ["easyops/model/cmdb/cmdb_object"],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "objectId",
            "type": "object_id",
            "description": "模型Id"
          },
          {
            "name": "body",
            "type": "object",
            "fields": [
              {
                "ref": "CmdbObject.name"
              },
              {
                "ref": "CmdbObject.icon"
              },
              {
                "ref": "CmdbObject.category"
              },
              {
                "ref": "CmdbObject.memo"
              },
              {
                "ref": "CmdbObject.view"
              },
              {
                "ref": "CmdbObject.readAuthorizers"
              },
              {
                "ref": "CmdbObject.updateAuthorizers"
              },
              {
                "ref": "CmdbObject.deleteAuthorizers"
              }
            ],
            "description": "模型信息"
          }
        ],
        "required": ["objectId"]
      },
      "response": {
        "type": "CmdbObject"
      }
    },
    {
      "contract": "cmdb.cmdb_object.UpdateAttributeCategory",
      "name": "UpdateAttributeCategory",
      "version": "1.0.0",
      "description": "修改字段分类",
      "endpoint": {
        "method": "PUT",
        "uri": "/object/:objectId/attribute_category/:name"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "objectId",
            "type": "object_id",
            "description": "模型Id"
          },
          {
            "name": "name",
            "type": "string",
            "description": "分类名称"
          },
          {
            "name": "newName",
            "type": "string",
            "description": "新分类名称"
          },
          {
            "name": "appendAttrList",
            "type": "string[]",
            "description": "添加属性，关系到此分组"
          }
        ],
        "required": ["name"]
      },
      "response": null
    },
    {
      "contract": "cmdb.cmdb_object.UpdateProperty",
      "name": "UpdateProperty",
      "version": "1.1.0",
      "description": "更新模型属性",
      "endpoint": {
        "method": "PUT",
        "uri": "/object/:objectId/attr/:attrId",
        "ext_fields": [
          {
            "name": "body",
            "source": "body"
          }
        ]
      },
      "import": ["easyops/model/cmdb/object_attr"],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "objectId",
            "type": "object_id",
            "description": "模型Id"
          },
          {
            "name": "attrId",
            "type": "attr_id",
            "description": "属性id"
          },
          {
            "name": "body",
            "type": "object",
            "fields": [
              {
                "ref": "ObjectAttr.name"
              },
              {
                "ref": "ObjectAttr.unique"
              },
              {
                "ref": "ObjectAttr.readonly"
              },
              {
                "ref": "ObjectAttr.required"
              },
              {
                "ref": "ObjectAttr.tag"
              },
              {
                "ref": "ObjectAttr.value"
              },
              {
                "ref": "ObjectAttr.description"
              },
              {
                "ref": "ObjectAttr.tips"
              }
            ],
            "description": "属性信息"
          }
        ],
        "required": ["objectId", "attrId"]
      },
      "response": {
        "type": "ObjectAttr"
      }
    },
    {
      "contract": "cmdb.cmdb_object.UpdateRelationQueryStrategyV2",
      "name": "UpdateRelationQueryStrategyV2",
      "version": "2.0.0",
      "description": "更新查询策略v2",
      "endpoint": {
        "method": "PUT",
        "uri": "/v2/object/:object_id/relation_query_strategy/:id",
        "ext_fields": [
          {
            "name": "body",
            "source": "body"
          }
        ]
      },
      "import": ["easyops/model/cmdb/relation_query_strategy_v2"],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "object_id",
            "type": "object_id",
            "description": "模型ID"
          },
          {
            "name": "id",
            "type": "string",
            "description": "策略id"
          },
          {
            "name": "body",
            "type": "object",
            "fields": [
              {
                "ref": "RelationQueryStrategyV2.id"
              },
              {
                "ref": "RelationQueryStrategyV2.byPath"
              },
              {
                "ref": "RelationQueryStrategyV2.name"
              },
              {
                "ref": "RelationQueryStrategyV2.type"
              },
              {
                "ref": "RelationQueryStrategyV2.path_list"
              },
              {
                "ref": "RelationQueryStrategyV2.readAuthorizers"
              },
              {
                "ref": "RelationQueryStrategyV2.updateAuthorizers"
              },
              {
                "ref": "RelationQueryStrategyV2.deleteAuthorizers"
              }
            ],
            "description": "策略数据"
          }
        ],
        "required": ["object_id", "id"]
      },
      "response": {
        "type": "RelationQueryStrategyV2"
      }
    },
    {
      "contract": "cmdb.cmdb_object.UpdateV2",
      "name": "UpdateV2",
      "version": "1.1.0",
      "description": "更新模型",
      "endpoint": {
        "method": "PUT",
        "uri": "/v2/object/:objectId",
        "ext_fields": [
          {
            "name": "body",
            "source": "body"
          }
        ]
      },
      "import": ["easyops/model/cmdb/cmdb_object"],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "objectId",
            "type": "object_id",
            "description": "模型Id"
          },
          {
            "name": "body",
            "type": "object",
            "fields": [
              {
                "ref": "CmdbObject.name"
              },
              {
                "ref": "CmdbObject.icon"
              },
              {
                "ref": "CmdbObject.category"
              },
              {
                "ref": "CmdbObject.memo"
              },
              {
                "ref": "CmdbObject.view"
              },
              {
                "ref": "CmdbObject.updateAuthorizers"
              },
              {
                "ref": "CmdbObject.deleteAuthorizers"
              },
              {
                "ref": "CmdbObject.notifyDenied"
              },
              {
                "ref": "CmdbObject.permissionDenied"
              },
              {
                "ref": "CmdbObject.wordIndexDenied"
              },
              {
                "ref": "CmdbObject.system"
              },
              {
                "ref": "CmdbObject.parentObjectIds"
              }
            ],
            "description": "模型信息"
          }
        ],
        "required": ["objectId"]
      },
      "response": {
        "type": "CmdbObject"
      }
    },
    {
      "contract": "cmdb.history.HistoryExportExcel",
      "name": "HistoryExportExcel",
      "version": "1.1.0",
      "description": "变更记录导出excel接口",
      "endpoint": {
        "method": "GET",
        "uri": "/history/export/excel"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "object_id",
            "type": "string",
            "description": "模型Id"
          },
          {
            "name": "instanceId",
            "type": "string",
            "description": "实例ID"
          },
          {
            "name": "operator",
            "type": "string",
            "description": "操作人"
          },
          {
            "name": "event",
            "type": "string",
            "description": "事件名称"
          },
          {
            "name": "exclude_event",
            "type": "string",
            "description": "排除事件名称"
          },
          {
            "name": "parent_event_id",
            "type": "string",
            "description": "父事件id"
          },
          {
            "name": "range",
            "type": "string",
            "description": "range"
          },
          {
            "name": "st",
            "type": "string",
            "description": "st"
          },
          {
            "name": "et",
            "type": "string",
            "description": "et"
          },
          {
            "name": "with_children",
            "type": "bool",
            "description": "是否查询子事件（true查询子事件，false不查询子时间，默认false)"
          },
          {
            "name": "is_next",
            "type": "bool",
            "description": "是否新站点，用于导出详情链接"
          },
          {
            "name": "url_mode",
            "type": "int",
            "description": "导出链接的模式，1-老console 2-旧next环境 3-新next环境，此值为空时以is_next为准"
          }
        ]
      },
      "response": {
        "type": "file"
      }
    },
    {
      "contract": "cmdb.history.RollbackInstance",
      "name": "RollbackInstance",
      "version": "1.0.0",
      "description": "实例回滚",
      "endpoint": {
        "method": "PUT",
        "uri": "/object/:objectId/instance/:instanceId/_rollback"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "objectId",
            "type": "object_id",
            "description": "模型Id"
          },
          {
            "name": "instanceId",
            "type": "instance_id",
            "description": "实例ID"
          },
          {
            "name": "_version",
            "type": "int",
            "description": "实例版本号"
          },
          {
            "name": "_ts",
            "type": "value",
            "description": "实例变更的操作时间"
          }
        ],
        "required": ["objectId", "instanceId", "_version", "_ts"]
      },
      "response": {
        "type": "map"
      }
    },
    {
      "contract": "cmdb.index.CreateIndex",
      "name": "CreateIndex",
      "version": "1.0.0",
      "description": "创建索引",
      "endpoint": {
        "method": "POST",
        "uri": "/object/:objectId/index"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "objectId",
            "type": "object_id",
            "description": "模型Id"
          },
          {
            "name": "propertyIds",
            "type": "string[]",
            "description": "属性Id"
          },
          {
            "name": "unique",
            "type": "bool",
            "description": "是否唯一"
          }
        ],
        "required": ["objectId", "propertyIds", "unique"]
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "indexName",
            "type": "string",
            "description": "索引名称,唯一标识"
          }
        ]
      }
    },
    {
      "contract": "cmdb.index.DeleteIndex",
      "name": "DeleteIndex",
      "version": "1.0.0",
      "description": "删除索引",
      "endpoint": {
        "method": "DELETE",
        "uri": "/object/:objectId/index/:indexName"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "objectId",
            "type": "object_id",
            "description": "模型Id"
          },
          {
            "name": "indexName",
            "type": "string",
            "description": "索引名称"
          }
        ],
        "required": ["objectId", "indexName"]
      },
      "response": null
    },
    {
      "contract": "cmdb.initialization.InitDatabase",
      "name": "InitDatabase",
      "version": "1.0.0",
      "description": "初始化DB[内部]",
      "endpoint": {
        "method": "POST",
        "uri": "/initialization/database"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "org",
            "type": "int",
            "description": "org"
          }
        ],
        "required": ["org"]
      },
      "response": null
    },
    {
      "contract": "cmdb.initialization.InitObjects",
      "name": "InitObjects",
      "version": "1.0.0",
      "description": "初始化核心模型[内部]",
      "endpoint": {
        "method": "POST",
        "uri": "/initialization/objects"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "org",
            "type": "int",
            "description": "org"
          }
        ],
        "required": ["org"]
      },
      "response": null
    },
    {
      "contract": "cmdb.initialization.InitRelations",
      "name": "InitRelations",
      "version": "1.0.0",
      "description": "初始化核心模型关系[内部]",
      "endpoint": {
        "method": "POST",
        "uri": "/initialization/relations"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "org",
            "type": "int",
            "description": "org"
          }
        ],
        "required": ["org"]
      },
      "response": null
    },
    {
      "contract": "cmdb.instance.AddStrToArray",
      "name": "AddStrToArray",
      "version": "1.0.0",
      "description": "append数据到实例arr属性内",
      "detail": "append数据到实例arr属性内",
      "endpoint": {
        "method": "POST",
        "uri": "/object/:objectId/instance/add_str_to_array"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "objectId",
            "type": "object_id",
            "description": "objectId"
          },
          {
            "name": "attr_id",
            "type": "attr_id",
            "description": "属性key(仅支持arr类型属性)"
          },
          {
            "name": "query",
            "type": "map",
            "description": "与实例搜索query一致,将对search到的所有实例操作"
          },
          {
            "name": "values",
            "type": "string[]",
            "description": "append的值"
          }
        ],
        "required": ["objectId", "attr_id", "query", "values"]
      },
      "response": {
        "type": "object[]",
        "fields": [
          {
            "name": "instanceId",
            "type": "instance_id",
            "description": "实例Id"
          },
          {
            "name": "values",
            "type": "string[]",
            "description": "属性值"
          }
        ],
        "required": ["instanceId", "values"]
      }
    },
    {
      "contract": "cmdb.instance.AddStrToSet",
      "name": "AddStrToSet",
      "version": "1.0.0",
      "description": "append数据到实例arr属性内(set)",
      "detail": "append数据到实例arr属性内,数组中已存在此值的话,不会被append进去",
      "endpoint": {
        "method": "POST",
        "uri": "/object/:objectId/instance/add_str_to_set"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "objectId",
            "type": "object_id",
            "description": "objectId"
          },
          {
            "name": "attr_id",
            "type": "attr_id",
            "description": "属性key(仅支持arr类型属性)"
          },
          {
            "name": "query",
            "type": "map",
            "description": "与实例搜索query一致,将对search到的所有实例操作"
          },
          {
            "name": "values",
            "type": "string[]",
            "description": "append的值"
          }
        ],
        "required": ["objectId", "attr_id", "query", "values"]
      },
      "response": {
        "type": "object[]",
        "fields": [
          {
            "name": "instanceId",
            "type": "instance_id",
            "description": "实例Id"
          },
          {
            "name": "values",
            "type": "string[]",
            "description": "属性值"
          }
        ],
        "required": ["instanceId", "values"]
      }
    },
    {
      "contract": "cmdb.instance.AggregateInstance",
      "name": "AggregateInstance",
      "version": "1.1.0",
      "description": "实例字段聚合接口",
      "detail": "根据实例某个字段聚合",
      "endpoint": {
        "method": "POST",
        "uri": "/object/:objectId/instance/aggregate"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "objectId",
            "type": "object_id",
            "description": "URL中资源模型ID"
          },
          {
            "name": "query",
            "type": "map",
            "description": "查询条件,与[实例搜索接口]的query字段一致"
          },
          {
            "name": "fields",
            "type": "map",
            "description": "过滤字段"
          },
          {
            "name": "sort",
            "type": "object[]",
            "fields": [
              {
                "name": "key",
                "type": "string",
                "description": "属性id"
              },
              {
                "name": "order",
                "type": "int",
                "enum": [-1, 1, -2, 2],
                "description": "1表示升序， -1表示降序, 2表示自然升序， -2表示自然降序"
              }
            ],
            "description": "按字段排序， 留空默认按照实例ID降序排序(1表示升序， -1表示降序) e.g.: { instanceId: 1 }"
          },
          {
            "name": "permission",
            "type": "string[]",
            "description": "按照权限过滤(通用实例都有`read`, `update`, `delete`权限控制, 主机实例在通用实例权限基础上有额外的`operate`权限, 应用实例在通用实例权限基础上有额外的`developClusterOperate`, `testClusterOperate`, `prereleaseClusterOperate`, `productionClusterOperate`权限)"
          },
          {
            "name": "only_my_instance",
            "type": "bool",
            "description": "是否只获取与自己有关的那部分数据, 默认为false"
          },
          {
            "name": "aggregate_key",
            "type": "string",
            "description": "聚合属性id（只支持字符类型）"
          }
        ],
        "required": ["objectId", "aggregate_key"]
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "list",
            "type": "object[]",
            "fields": [
              {
                "name": "aggregate_value",
                "type": "string",
                "description": "聚合值"
              },
              {
                "name": "data_list",
                "type": "map[]",
                "description": "instance list"
              }
            ],
            "description": "聚合结果"
          }
        ],
        "required": ["list"]
      }
    },
    {
      "contract": "cmdb.instance.AggregateCount",
      "name": "AggregateCount",
      "version": "1.0.0",
      "description": "实例计数统计",
      "endpoint": {
        "method": "LIST",
        "uri": "/object/:objectId/instance/aggregate/count/:attrId"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "objectId",
            "type": "object_id",
            "description": "URL中资源模型ID"
          },
          {
            "name": "attrId",
            "type": "attr_id",
            "description": "URL中模型属性ID, 支持结构体，用.分隔结构体名称和属性名称，如cpu.brand"
          },
          {
            "name": "page",
            "type": "page",
            "description": "页码"
          },
          {
            "name": "page_size",
            "type": "page_size",
            "description": "页大小"
          }
        ],
        "default": {
          "page": 1,
          "page_size": 200
        },
        "required": ["objectId", "attrId"]
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "count",
            "type": "int",
            "description": "个数"
          },
          {
            "name": "attr",
            "type": "map",
            "description": "属性值"
          }
        ],
        "required": ["count", "attr"]
      }
    },
    {
      "contract": "cmdb.instance.AggregateCountV2",
      "name": "AggregateCountV2",
      "version": "1.0.0",
      "description": "实例计数统计接口v2",
      "detail": "实例计数统计,不分页",
      "endpoint": {
        "method": "GET",
        "uri": "/v2/object/:objectId/instance_aggregate/count/:attrId"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "objectId",
            "type": "object_id",
            "description": "URL中资源模型ID"
          },
          {
            "name": "attrId",
            "type": "attr_id",
            "description": "URL中模型属性ID, 支持结构体，用.分隔结构体名称和属性名称，如cpu.brand"
          },
          {
            "name": "top",
            "type": "int",
            "description": "top n, 默认300, 为0则获取所有, top n+1以后的属性值将会聚合追加到最后,属性值为'-'"
          }
        ],
        "required": ["objectId", "attrId"],
        "default": {
          "top": 300
        }
      },
      "response": {
        "type": "object[]",
        "fields": [
          {
            "name": "count",
            "type": "int",
            "description": "个数"
          },
          {
            "name": "attr",
            "type": "map",
            "description": "属性值"
          }
        ],
        "required": ["count", "attr"]
      }
    },
    {
      "contract": "cmdb.instance.AutoDiscovery",
      "name": "AutoDiscovery",
      "version": "1.0.0",
      "description": "实例自动发现的接口",
      "endpoint": {
        "method": "POST",
        "uri": "/object/:objectId/instance/_import-json",
        "ext_fields": [
          {
            "name": "body",
            "source": "body"
          }
        ]
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "objectId",
            "type": "object_id",
            "description": "资源模型ID"
          },
          {
            "name": "body",
            "type": "object[]",
            "fields": [
              {
                "name": "filter",
                "type": "map",
                "description": "筛选器"
              },
              {
                "name": "update",
                "type": "map",
                "description": "更新数据"
              },
              {
                "name": "upsert",
                "type": "bool",
                "description": "存在即更新"
              }
            ],
            "description": "请求体"
          }
        ],
        "required": ["objectId", "body"]
      },
      "response": {
        "wrapper": false,
        "type": "object",
        "fields": [
          {
            "name": "code",
            "type": "int",
            "description": "返回码"
          },
          {
            "name": "error",
            "type": "string",
            "description": "错误信息"
          },
          {
            "name": "message",
            "type": "string",
            "description": "返回消息"
          },
          {
            "name": "data",
            "type": "object[]",
            "fields": [
              {
                "name": "instanceId",
                "type": "instance_id",
                "description": "实例Id"
              },
              {
                "name": "code",
                "type": "int",
                "description": "状态码"
              },
              {
                "name": "matched",
                "type": "bool",
                "description": "是否匹配到数据"
              },
              {
                "name": "effected",
                "type": "bool",
                "description": "是否有效"
              },
              {
                "name": "message",
                "type": "string",
                "description": "错误信息"
              }
            ],
            "description": "data"
          }
        ],
        "required": ["code", "error", "message", "data"]
      }
    },
    {
      "contract": "cmdb.instance.BatchListInstanceQueryStrategy",
      "name": "BatchListInstanceQueryStrategy",
      "version": "1.0.0",
      "description": "批量获取实例查询策略列表",
      "endpoint": {
        "method": "GET",
        "uri": "/batch/object/query/strategy"
      },
      "import": ["easyops/model/cmdb/instance_query_strategy"],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "object_ids",
            "type": "string",
            "description": "多个模型ID，以逗号分隔"
          },
          {
            "name": "type",
            "type": "string",
            "description": "策略类型"
          },
          {
            "name": "name",
            "type": "string",
            "description": "策略名称(模糊匹配)"
          }
        ]
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "strategy_data",
            "type": "object[]",
            "fields": [
              {
                "name": "object_id",
                "type": "string",
                "description": "模型ID"
              },
              {
                "name": "strategy_list",
                "type": "InstanceQueryStrategy[]",
                "description": "策略列表"
              }
            ],
            "description": "各模型的实例查询策略数据"
          }
        ]
      }
    },
    {
      "contract": "cmdb.instance.BatchSearch",
      "name": "BatchSearch",
      "version": "1.1.0",
      "description": "多模型批量搜索实例",
      "endpoint": {
        "method": "POST",
        "uri": "/batch/object/instance/_search"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "data",
            "type": "object[]",
            "fields": [
              {
                "name": "object_id",
                "type": "object_id",
                "description": "模型对象ID"
              },
              {
                "name": "search",
                "type": "object",
                "fields": [
                  {
                    "name": "query",
                    "type": "map",
                    "description": "e.g.: { name: { $like: '%q%' } }, { $or: [{ name: { $like: '%q%' }}] }"
                  },
                  {
                    "name": "fields",
                    "type": "map",
                    "description": "e.g.: { instanceId: true, name: true }"
                  },
                  {
                    "name": "only_my_instance",
                    "type": "bool",
                    "description": "当为 true 时，只搜索与我相关实例"
                  },
                  {
                    "name": "only_relation_view",
                    "type": "bool",
                    "description": "对于关联的实例数据是否只获取 relation_view 中指定的属性, 这个字段为 true 时, 会覆盖 fields 字段中指定的二级字段设置"
                  },
                  {
                    "name": "page",
                    "type": "page",
                    "description": "页码"
                  },
                  {
                    "name": "page_size",
                    "type": "page_size",
                    "description": "页大小"
                  },
                  {
                    "name": "sort",
                    "type": "map",
                    "description": "按字段排序, 留空默认按照实例ID降序排序(1表示升序， -1表示降序, 2表示自然升序， -2表示自然降序) e.g.: { instanceId: 1 }"
                  },
                  {
                    "name": "permission",
                    "type": "string[]",
                    "description": "按照权限过滤(通用实例都有 read, update, delete 权限控制, 主机实例在通用实例权限基础上有额外的 operate 权限, 应用实例在通用实例权限基础上有额外的 developClusterOperate, testClusterOperate, prereleaseClusterOperate, productionClusterOperate 权限) e.g.: [ \"operate\", \"update\" ]"
                  }
                ],
                "description": "搜索条件"
              }
            ],
            "description": "body"
          }
        ],
        "default": {
          "data.search.page": 1,
          "data.search.page_size": 30,
          "data.search.only_my_instance": false,
          "data.search.only_relation_view": false
        },
        "required": ["data.object_id"]
      },
      "response": {
        "wrapper": false,
        "type": "object",
        "fields": [
          {
            "name": "code",
            "type": "int",
            "description": "返回码"
          },
          {
            "name": "error",
            "type": "string",
            "description": "错误信息"
          },
          {
            "name": "message",
            "type": "string",
            "description": "返回消息"
          },
          {
            "name": "data",
            "type": "object[]",
            "fields": [
              {
                "name": "list",
                "type": "map[]",
                "description": "instance list"
              },
              {
                "name": "total",
                "type": "int",
                "description": "实例总数"
              },
              {
                "name": "page",
                "type": "page",
                "description": "页码"
              },
              {
                "name": "page_size",
                "type": "page_size",
                "description": "页大小"
              }
            ],
            "description": "实例总数"
          }
        ],
        "required": ["code", "error", "message", "data"]
      }
    },
    {
      "contract": "cmdb.instance.CountAll",
      "name": "CountAll",
      "version": "1.0.0",
      "description": "获取所有模型实例数量",
      "endpoint": {
        "method": "GET",
        "uri": "/object_count_all"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "objectIds",
            "type": "comma_separated_string",
            "description": "资源模型ID列表，不传则获取所有模型"
          }
        ]
      },
      "response": {
        "type": "map"
      }
    },
    {
      "contract": "cmdb.instance.CreateInstance",
      "name": "CreateInstance",
      "version": "1.1.0",
      "description": "创建实例",
      "detail": "body为实例信息,字段限制参考模型定义,支持关系创建",
      "endpoint": {
        "method": "POST",
        "uri": "/v2/object/:objectId/instance",
        "ext_fields": [
          {
            "name": "instance",
            "source": "body"
          }
        ]
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "objectId",
            "type": "object_id",
            "description": "objectId"
          },
          {
            "name": "instance",
            "type": "map",
            "description": "创建实例"
          },
          {
            "name": "only_instance_id",
            "type": "bool",
            "description": "是否只返回实例id"
          },
          {
            "name": "fill_metadata",
            "type": "bool",
            "description": "是否可指定metadata字段,如ctime,creator,为true时将会默认填充mtime,modifier字段"
          }
        ],
        "default": {
          "only_instance_id": false,
          "fill_metadata": false
        }
      },
      "response": {
        "type": "map"
      }
    },
    {
      "contract": "cmdb.instance.CreateInstanceQueryStrategy",
      "name": "CreateInstanceQueryStrategy",
      "version": "1.0.0",
      "description": "创建实例查询策略",
      "endpoint": {
        "method": "POST",
        "uri": "/object/:objectId/query/strategy"
      },
      "import": ["easyops/model/cmdb/instance_query_strategy"],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "objectId",
            "type": "object_id",
            "description": "模型对象ID"
          },
          {
            "ref": "InstanceQueryStrategy.name"
          },
          {
            "ref": "InstanceQueryStrategy.type"
          },
          {
            "ref": "InstanceQueryStrategy.instance_type"
          },
          {
            "ref": "InstanceQueryStrategy.query"
          },
          {
            "ref": "InstanceQueryStrategy.fields"
          }
        ],
        "required": ["objectId", "InstanceQueryStrategy.query"]
      },
      "response": {
        "type": "InstanceQueryStrategy"
      }
    },
    {
      "contract": "cmdb.instance.DeleteInstance",
      "name": "DeleteInstance",
      "version": "1.0.0",
      "description": "删除实例",
      "endpoint": {
        "method": "DELETE",
        "uri": "/object/:objectId/instance/:instanceId"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "objectId",
            "type": "object_id",
            "description": "模型对象ID"
          },
          {
            "name": "instanceId",
            "type": "instance_id",
            "description": "实例ID"
          },
          {
            "name": "only_instance_id",
            "type": "bool",
            "description": "是否只返回实例id"
          }
        ],
        "required": ["objectId", "instanceId"],
        "default": {
          "only_instance_id": false
        }
      },
      "response": {
        "type": "map"
      }
    },
    {
      "contract": "cmdb.instance.DeleteInstanceBatch",
      "name": "DeleteInstanceBatch",
      "version": "1.0.0",
      "description": "批量删除实例",
      "endpoint": {
        "method": "DELETE",
        "uri": "/object/:objectId/instance/_batch"
      },
      "import": ["easyops/model/cmdb/fail_instance"],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "objectId",
            "type": "object_id",
            "description": "模型对象ID"
          },
          {
            "name": "instanceIds",
            "type": "string",
            "description": "实例ID, 用分号隔开, e.g. 5ab9f10a6ef88;5abb0dca9971d"
          }
        ],
        "required": ["objectId", "instanceIds"]
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "deleteFailedInstances",
            "type": "FailInstance[]",
            "description": "删除失败的实例列表"
          }
        ]
      }
    },
    {
      "contract": "cmdb.instance.DeleteInstanceQueryStrategy",
      "name": "DeleteInstanceQueryStrategy",
      "version": "1.0.0",
      "description": "删除实例查询策略",
      "endpoint": {
        "method": "DELETE",
        "uri": "/object/:objectId/query/strategy/:strategyId"
      },
      "import": ["easyops/model/cmdb/instance_query_strategy"],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "objectId",
            "type": "object_id",
            "description": "模型对象ID"
          },
          {
            "name": "strategyId",
            "type": "string",
            "description": "策略ID"
          }
        ],
        "required": ["objectId", "strategyId"]
      },
      "response": {
        "type": "InstanceQueryStrategy"
      }
    },
    {
      "contract": "cmdb.instance.ExportInstance",
      "name": "ExportInstance",
      "version": "1.0.0",
      "description": "实例导出",
      "endpoint": {
        "method": "POST",
        "uri": "/object/:object_id/instance/export"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "object_id",
            "type": "object_id",
            "description": "模型ID"
          },
          {
            "name": "json",
            "type": "string",
            "description": "请求参数json序列化"
          }
        ],
        "required": ["object_id"],
        "default": {
          "json": "{}"
        }
      },
      "response": {
        "type": "file"
      }
    },
    {
      "contract": "cmdb.instance.ExportInstanceCsv",
      "name": "ExportInstanceCsv",
      "version": "1.0.0",
      "description": "实例导出csv",
      "endpoint": {
        "method": "POST",
        "uri": "/object/:object_id/instance/export"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "object_id",
            "type": "object_id",
            "description": "模型对象ID"
          },
          {
            "name": "json",
            "type": "string",
            "description": "请求参数json序列化"
          }
        ],
        "default": {
          "json": "{}"
        },
        "required": ["object_id"]
      },
      "response": {
        "type": "file"
      }
    },
    {
      "contract": "cmdb.instance.ExportInstanceExcel",
      "name": "ExportInstanceExcel",
      "version": "1.1.0",
      "description": "实例导出excel",
      "endpoint": {
        "method": "POST",
        "uri": "/export/object/:object_id/instance/excel"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "object_id",
            "type": "object_id",
            "description": "模型对象ID"
          },
          {
            "name": "query",
            "type": "map",
            "description": "e.g.: { name: { $like: '%q%' } }, { $or: [{ name: { $like: '%q%' }}] }"
          },
          {
            "name": "fields",
            "type": "map",
            "description": "e.g.: { instanceId: true, name: true }"
          },
          {
            "name": "only_my_instance",
            "type": "bool",
            "description": "当为 true 时，只搜索与我相关实例"
          },
          {
            "name": "only_relation_view",
            "type": "bool",
            "description": "对于关联的实例数据是否只获取 relation_view 中指定的属性, 这个字段为 true 时, 会覆盖 fields 字段中指定的二级字段设置"
          },
          {
            "name": "sort",
            "type": "map",
            "description": "按字段排序, 留空默认按照实例ID降序排序(1表示升序， -1表示降序, 2表示自然升序， -2表示自然降序) e.g.: { instanceId: 1 }"
          },
          {
            "name": "permission",
            "type": "string[]",
            "description": "按照权限过滤(通用实例都有 read, update, delete 权限控制, 主机实例在通用实例权限基础上有额外的 operate 权限, 应用实例在通用实例权限基础上有额外的 developClusterOperate, testClusterOperate, prereleaseClusterOperate, productionClusterOperate 权限) e.g.: [ \"operate\", \"update\" ]"
          }
        ],
        "default": {
          "only_my_instance": false,
          "only_relation_view": false
        },
        "required": ["object_id"]
      },
      "response": {
        "type": "file"
      }
    },
    {
      "contract": "cmdb.instance.FulltextSearch",
      "name": "FulltextSearch",
      "version": "1.0.0",
      "description": "全文搜索",
      "endpoint": {
        "method": "GET",
        "uri": "/fulltext/_search"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "page",
            "type": "page",
            "description": "页码",
            "validate": {
              "gte": 1
            }
          },
          {
            "name": "page_size",
            "type": "page_size",
            "description": "页大小",
            "validate": {
              "gte": 1
            }
          },
          {
            "name": "keyword",
            "type": "string",
            "description": "搜索关键字"
          },
          {
            "name": "object_id",
            "type": "object_id",
            "description": "资源模型Id"
          },
          {
            "name": "prefixSearch",
            "type": "string",
            "enum": ["true", "false"],
            "description": "默认前缀搜索,true/false"
          }
        ],
        "default": {
          "page": 1,
          "page_size": 30,
          "prefixSearch": true
        }
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "list",
            "type": "map[]",
            "description": "实例数据"
          },
          {
            "name": "total",
            "type": "int",
            "description": "实例总数"
          },
          {
            "name": "page",
            "type": "page",
            "description": "页码"
          },
          {
            "name": "page_size",
            "type": "page_size",
            "description": "页大小"
          },
          {
            "name": "count",
            "type": "map",
            "description": "模型实例统计数据,如:{\"HOST\": 10, \"APP\": 5}"
          }
        ],
        "required": ["list", "total", "page", "page_size", "count"]
      }
    },
    {
      "contract": "cmdb.instance.GetDefaultValueTemplate",
      "name": "GetDefaultValueTemplate",
      "version": "1.0.0",
      "description": "获取实例默认值模板",
      "endpoint": {
        "method": "GET",
        "uri": "/object/:objectId/instance_default_value_template"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "objectId",
            "type": "object_id",
            "description": "实例所属的模型ID"
          },
          {
            "name": "exclude_keys",
            "type": "string",
            "description": "不获取默认值的字段，用逗号分隔"
          }
        ],
        "required": ["objectId"]
      },
      "response": {
        "type": "map"
      }
    },
    {
      "contract": "cmdb.instance.GetDetail",
      "name": "GetDetail",
      "version": "1.0.0",
      "description": "获取实例详情",
      "endpoint": {
        "method": "GET",
        "uri": "/object/:objectId/instance/:instanceId"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "objectId",
            "type": "object_id",
            "description": "模型对象ID"
          },
          {
            "name": "instanceId",
            "type": "instance_id",
            "description": "实例ID"
          },
          {
            "name": "fields",
            "type": "string",
            "description": "指定返回的fields（支持普通属性和关系，关系支持点分法获得多级字段），多个的话用逗号分隔（name,owner.instanceId,owner.name），* 代表所有普通属性。注意：建议都指定fields，按需拉取字段，不然有可能返回数据量太大而导致接口慢系统不稳定"
          },
          {
            "name": "get_show_key",
            "type": "bool",
            "description": "是否返回实例的默认显示名称"
          }
        ],
        "required": ["objectId", "instanceId"],
        "default": {
          "get_show_key": false
        }
      },
      "response": {
        "type": "map"
      }
    },
    {
      "contract": "cmdb.instance.GetImportInstanceCsv",
      "name": "GetImportInstanceCsv",
      "version": "1.0.0",
      "description": "获取实例导入csv模板文件",
      "endpoint": {
        "method": "GET",
        "uri": "/import/object/:object_id/instance/csv"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "object_id",
            "type": "object_id",
            "description": "模型对象ID"
          }
        ],
        "required": ["object_id"]
      },
      "response": {
        "type": "file"
      }
    },
    {
      "contract": "cmdb.instance.GetImportInstanceExcel",
      "name": "GetImportInstanceExcel",
      "version": "1.0.0",
      "description": "获取实例导入excel模板文件",
      "endpoint": {
        "method": "GET",
        "uri": "/import/object/:object_id/instance/excel"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "object_id",
            "type": "object_id",
            "description": "模型对象ID"
          }
        ],
        "required": ["object_id"]
      },
      "response": {
        "type": "file"
      }
    },
    {
      "contract": "cmdb.instance.GetInstanceQueryStrategy",
      "name": "GetInstanceQueryStrategy",
      "version": "1.0.0",
      "description": "获取实例查询策略",
      "endpoint": {
        "method": "GET",
        "uri": "/object/:objectId/query/strategy/:strategyId"
      },
      "import": ["easyops/model/cmdb/instance_query_strategy"],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "objectId",
            "type": "object_id",
            "description": "模型对象ID"
          },
          {
            "name": "strategyId",
            "type": "string",
            "description": "策略ID"
          }
        ],
        "required": ["objectId", "strategyId"]
      },
      "response": {
        "type": "InstanceQueryStrategy"
      }
    },
    {
      "contract": "cmdb.instance.GroupInstance",
      "name": "GroupInstance",
      "version": "1.1.0",
      "description": "实例聚合接口",
      "detail": "包括sum, max, min, avg",
      "endpoint": {
        "method": "POST",
        "uri": "/object/:object_id/instance/group"
      },
      "import": ["easyops/model/cmdb/group_instance_func"],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "object_id",
            "type": "object_id",
            "description": "URL中资源模型ID"
          },
          {
            "name": "query",
            "type": "map",
            "description": "查询条件,与[实例搜索接口]的query字段说明一致"
          },
          {
            "name": "permission",
            "type": "string[]",
            "description": "按照权限过滤(通用实例都有`read`, `update`, `delete`权限控制, 主机实例在通用实例权限基础上有额外的`operate`权限, 应用实例在通用实例权限基础上有额外的`developClusterOperate`, `testClusterOperate`, `prereleaseClusterOperate`, `productionClusterOperate`权限)"
          },
          {
            "name": "only_my_instance",
            "type": "bool",
            "description": "是否只获取与自己有关的那部分数据, 默认为false"
          },
          {
            "name": "group_field",
            "type": "string",
            "description": "聚合属性id（只支持普通属性）"
          },
          {
            "name": "funcs",
            "type": "GroupInstanceFunc[]",
            "description": "操作列表,对某字段进行,sum, max..."
          }
        ],
        "required": ["object_id", "group_field", "funcs"]
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "list",
            "type": "object[]",
            "fields": [
              {
                "name": "group_field",
                "type": "string",
                "description": "聚合字段的key"
              },
              {
                "name": "group_value",
                "type": "value",
                "description": "聚合字段的值"
              },
              {
                "name": "func_values",
                "type": "object[]",
                "fields": [
                  {
                    "name": "alias",
                    "type": "string",
                    "description": "字段别名"
                  },
                  {
                    "name": "value",
                    "type": "value",
                    "description": "字段值"
                  }
                ],
                "description": "操作结果"
              }
            ],
            "description": "list"
          }
        ],
        "required": ["list"]
      }
    },
    {
      "contract": "cmdb.instance.GroupInstanceForHoneycomb",
      "name": "GroupInstanceForHoneycomb",
      "version": "1.2.0",
      "description": "实例分组蜂窝图",
      "endpoint": {
        "method": "POST",
        "uri": "/v1/object/:objectId/instance/honeycomb"
      },
      "import": ["easyops/model/cmdb/honeycomb_group"],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "objectId",
            "type": "object_id",
            "description": "URL中资源模型ID"
          },
          {
            "name": "query",
            "type": "map",
            "description": "查询条件,与[实例搜索接口]的query字段说明一致"
          },
          {
            "name": "permission",
            "type": "string[]",
            "description": "按照权限过滤(通用实例都有`read`, `update`, `delete`权限控制, 主机实例在通用实例权限基础上有额外的`operate`权限, 应用实例在通用实例权限基础上有额外的`developClusterOperate`, `testClusterOperate`, `prereleaseClusterOperate`, `productionClusterOperate`权限)"
          },
          {
            "name": "onlyMyInstance",
            "type": "bool",
            "description": "是否只获取与自己有关的那部分数据, 默认为false"
          },
          {
            "name": "groupFields",
            "type": "string[]",
            "description": "分组字段（name，owner.#showKey）"
          },
          {
            "name": "extFields",
            "type": "string[]",
            "description": "额外实例字段"
          },
          {
            "name": "groupFieldsDesc",
            "type": "string[]",
            "description": "分组字段描述"
          },
          {
            "name": "fillByMetric",
            "type": "object",
            "fields": [
              {
                "name": "metricName",
                "type": "string",
                "description": "指标名"
              }
            ],
            "description": "用来填充颜色的指标"
          },
          {
            "name": "sizeByMetric",
            "type": "object",
            "fields": [
              {
                "name": "metricName",
                "type": "string",
                "description": "指标名"
              }
            ],
            "description": "用来设置大小的指标"
          }
        ],
        "required": ["objectId", "fillByMetric"]
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "list",
            "type": "HoneycombGroup[]",
            "description": "分组列表"
          },
          {
            "name": "fillByMetricMin",
            "type": "float",
            "description": "用于填充颜色的指标值最小值"
          },
          {
            "name": "fillByMetricMax",
            "type": "float",
            "description": "用于填充颜色的指标值最大值"
          },
          {
            "name": "sizeByMetricMin",
            "type": "float",
            "description": "用于设置尺寸的指标值最小值"
          },
          {
            "name": "sizeByMetricMax",
            "type": "float",
            "description": "用于设置尺寸的指标值最大值"
          },
          {
            "name": "total",
            "type": "int",
            "description": "实例总数"
          }
        ],
        "required": [
          "list",
          "fillByMetricMin",
          "fillByMetricMax",
          "sizeByMetricMin",
          "sizeByMetricMax",
          "total"
        ]
      }
    },
    {
      "contract": "cmdb.instance.GroupInstanceV2",
      "name": "GroupInstanceV2",
      "version": "1.1.0",
      "description": "实例聚合接口v2, 返回平铺的实例列表",
      "detail": "包括sum, max, min, avg",
      "endpoint": {
        "method": "POST",
        "uri": "/v2/object/:object_id/instance/group"
      },
      "import": ["easyops/model/cmdb/group_instance_func"],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "object_id",
            "type": "object_id",
            "description": "URL中资源模型ID"
          },
          {
            "name": "query",
            "type": "map",
            "description": "查询条件,与[实例搜索接口]的query字段说明一致"
          },
          {
            "name": "permission",
            "type": "string[]",
            "description": "按照权限过滤(通用实例都有`read`, `update`, `delete`权限控制, 主机实例在通用实例权限基础上有额外的`operate`权限, 应用实例在通用实例权限基础上有额外的`developClusterOperate`, `testClusterOperate`, `prereleaseClusterOperate`, `productionClusterOperate`权限)"
          },
          {
            "name": "only_my_instance",
            "type": "bool",
            "description": "是否只获取与自己有关的那部分数据, 默认为false"
          },
          {
            "name": "group_field",
            "type": "string",
            "description": "聚合属性id（只支持普通属性）"
          },
          {
            "name": "funcs",
            "type": "GroupInstanceFunc[]",
            "description": "操作列表,对某字段进行,sum, max..."
          }
        ],
        "required": ["object_id", "group_field", "funcs"]
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "list",
            "type": "map[]",
            "description": "数据列表，将group_field和funcs.alias的值作为key，group_value和funcs.value的值作为value"
          },
          {
            "name": "total",
            "type": "int",
            "description": "total"
          }
        ],
        "required": ["list", "total"]
      }
    },
    {
      "contract": "cmdb.instance.GroupInstanceV3",
      "name": "GroupInstanceV3",
      "version": "1.1.0",
      "description": "实例聚合接口v3",
      "detail": "支持聚合多字段，支持聚合单个关系，聚合函数包括sum, max, min, avg， 返回平铺的实例列表",
      "endpoint": {
        "method": "POST",
        "uri": "/v3/object/:object_id/instance/group"
      },
      "import": ["easyops/model/cmdb/group_instance_func"],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "object_id",
            "type": "object_id",
            "description": "URL中资源模型ID"
          },
          {
            "name": "query",
            "type": "map",
            "description": "查询条件,与[实例搜索接口]的query字段说明一致"
          },
          {
            "name": "permission",
            "type": "string[]",
            "description": "按照权限过滤(通用实例都有`read`, `update`, `delete`权限控制, 主机实例在通用实例权限基础上有额外的`operate`权限, 应用实例在通用实例权限基础上有额外的`developClusterOperate`, `testClusterOperate`, `prereleaseClusterOperate`, `productionClusterOperate`权限)"
          },
          {
            "name": "only_my_instance",
            "type": "bool",
            "description": "是否只获取与自己有关的那部分数据, 默认为false"
          },
          {
            "name": "group_fields",
            "type": "string[]",
            "description": "聚合属性id（支持多字段，包括属性和单个关系）"
          },
          {
            "name": "funcs",
            "type": "GroupInstanceFunc[]",
            "description": "操作列表,对某字段进行,sum, max..."
          }
        ],
        "required": ["object_id", "group_fields", "funcs"]
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "list",
            "type": "map[]",
            "description": "数据列表，将group_field和funcs.alias的值作为key，group_value和funcs.value的值作为value"
          },
          {
            "name": "total",
            "type": "int",
            "description": "total"
          }
        ],
        "required": ["list", "total"]
      }
    },
    {
      "contract": "cmdb.instance.ImportInstance",
      "name": "ImportInstance",
      "version": "1.1.0",
      "description": "批量编辑/新增实例",
      "endpoint": {
        "method": "POST",
        "uri": "/object/:objectId/instance/_import"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "objectId",
            "type": "object_id",
            "description": "实例所属的模型ID"
          },
          {
            "name": "keys",
            "type": "string[]",
            "description": "联合唯一的key(只支持普通属性,不支持结构体与关系字段),以这些key与datas里的数据组装query,作为插入/更新的依据"
          },
          {
            "name": "datas",
            "type": "map[]",
            "description": "导入实例数据列表,必须包含keys里面的字段"
          },
          {
            "name": "importMetadata",
            "type": "bool",
            "description": "是否导入metadata字段,ctime,creator,创建实例为true时将会默认填充mtime,modifier字段"
          }
        ],
        "required": ["objectId", "keys", "datas"]
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "insert_count",
            "type": "int",
            "description": "成功插入数量"
          },
          {
            "name": "update_count",
            "type": "int",
            "description": "成功更新数量"
          },
          {
            "name": "failed_count",
            "type": "int",
            "description": "失败数量"
          },
          {
            "name": "data",
            "type": "object[]",
            "fields": [
              {
                "name": "code",
                "type": "int",
                "description": "错误码"
              },
              {
                "name": "error",
                "type": "string",
                "description": "错误信息"
              },
              {
                "name": "data",
                "type": "map[]",
                "description": "错误数据"
              }
            ],
            "description": "失败数据"
          }
        ],
        "required": ["insert_count", "update_count", "failed_count", "data"]
      }
    },
    {
      "contract": "cmdb.instance.ImportInstanceWithCsv",
      "name": "ImportInstanceWithCsv",
      "version": "1.0.0",
      "description": "使用csv文件导入实例",
      "detail": "此接口以multipart/form-data方式提交数据",
      "endpoint": {
        "method": "POST",
        "uri": "/import/object/:object_id/instance/csv"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "object_id",
            "type": "object_id",
            "description": "实例所属的模型ID"
          },
          {
            "name": "keys",
            "type": "string[]",
            "description": "导入实例的字段"
          },
          {
            "name": "attachment",
            "type": "file",
            "description": "csv文件"
          }
        ],
        "required": ["object_id", "keys", "attachment"]
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "insert_count",
            "type": "int",
            "description": "成功插入数量"
          },
          {
            "name": "update_count",
            "type": "int",
            "description": "成功更新数量"
          },
          {
            "name": "failed_count",
            "type": "int",
            "description": "失败数量"
          },
          {
            "name": "data",
            "type": "object[]",
            "fields": [
              {
                "name": "code",
                "type": "int",
                "description": "错误码"
              },
              {
                "name": "error",
                "type": "string",
                "description": "错误信息"
              },
              {
                "name": "data",
                "type": "map[]",
                "description": "错误数据"
              }
            ],
            "description": "失败数据"
          }
        ],
        "required": ["insert_count", "update_count", "failed_count", "data"]
      }
    },
    {
      "contract": "cmdb.instance.ImportInstanceWithExcel",
      "name": "ImportInstanceWithExcel",
      "version": "1.0.0",
      "description": "使用excel文件导入实例",
      "detail": "此接口以multipart/form-data方式提交数据",
      "endpoint": {
        "method": "POST",
        "uri": "/import/object/:object_id/instance/excel"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "object_id",
            "type": "object_id",
            "description": "实例所属的模型ID"
          },
          {
            "name": "keys",
            "type": "string[]",
            "description": "导入实例的字段,作为更新/创建依据"
          },
          {
            "name": "attachment",
            "type": "file",
            "description": "excel文件"
          },
          {
            "name": "relation_operation",
            "type": "string",
            "enum": ["set", "append"],
            "description": "关系操作方式"
          }
        ],
        "required": ["object_id", "keys", "attachment"]
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "insert_count",
            "type": "int",
            "description": "成功插入数量"
          },
          {
            "name": "update_count",
            "type": "int",
            "description": "成功更新数量"
          },
          {
            "name": "failed_count",
            "type": "int",
            "description": "失败数量"
          },
          {
            "name": "data",
            "type": "object[]",
            "fields": [
              {
                "name": "code",
                "type": "int",
                "description": "错误码"
              },
              {
                "name": "error",
                "type": "string",
                "description": "错误信息"
              },
              {
                "name": "line",
                "type": "int",
                "description": "错误实例所在excel行数"
              }
            ],
            "description": "失败数据"
          }
        ],
        "required": ["insert_count", "update_count", "failed_count", "data"]
      }
    },
    {
      "contract": "cmdb.instance.ImportInstanceWithJson",
      "name": "ImportInstanceWithJson",
      "version": "1.0.0",
      "description": "使用json文件导入实例",
      "detail": "此接口以multipart/form-data方式提交数据",
      "endpoint": {
        "method": "POST",
        "uri": "/import/object/:object_id/instance/json"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "object_id",
            "type": "object_id",
            "description": "实例所属的模型ID"
          },
          {
            "name": "keys",
            "type": "string[]",
            "description": "导入实例的字段"
          },
          {
            "name": "attachment",
            "type": "file",
            "description": "json文件"
          }
        ],
        "required": ["object_id", "keys", "attachment"]
      },
      "response": {
        "wrapper": false,
        "type": "object",
        "fields": [
          {
            "name": "code",
            "type": "int",
            "description": "返回码,此返回码始终为0,具体错误要去data里看"
          },
          {
            "name": "error",
            "type": "string",
            "description": "错误信息"
          },
          {
            "name": "message",
            "type": "string",
            "description": "返回消息"
          },
          {
            "name": "data",
            "type": "object[]",
            "fields": [
              {
                "name": "instanceId",
                "type": "instance_id",
                "description": "实例Id"
              },
              {
                "name": "code",
                "type": "int",
                "description": "状态码"
              },
              {
                "name": "matched",
                "type": "bool",
                "description": "是否匹配到数据"
              },
              {
                "name": "effected",
                "type": "bool",
                "description": "是否有效"
              },
              {
                "name": "message",
                "type": "string",
                "description": "错误信息"
              }
            ],
            "description": "data"
          }
        ],
        "required": ["code", "error", "message", "data"]
      }
    },
    {
      "contract": "cmdb.instance.InstancePreviousSnapshot",
      "name": "InstancePreviousSnapshot",
      "version": "1.0.0",
      "description": "查询上一个版本实例快照接口",
      "endpoint": {
        "method": "GET",
        "uri": "/history/object/:object_id/instance/:instance_id/_recent_snapshot"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "object_id",
            "type": "object_id",
            "description": "模型对象ID"
          },
          {
            "name": "instance_id",
            "type": "instance_id",
            "description": "实例ID"
          },
          {
            "name": "_version",
            "type": "int",
            "description": "版本号",
            "validate": {
              "gte": 0
            }
          },
          {
            "name": "_ts",
            "type": "int",
            "description": "操作时间",
            "validate": {
              "gte": 0
            }
          }
        ],
        "required": ["object_id", "instance_id", "_version", "_ts"]
      },
      "response": {
        "type": "map"
      }
    },
    {
      "contract": "cmdb.instance.InstanceRelationsCount",
      "name": "InstanceRelationsCount",
      "version": "1.0.0",
      "description": "单个实例关系统计",
      "detail": "对于APP会额外返回其集群下所有主机的数量(_clusters_deviceList)",
      "endpoint": {
        "method": "GET",
        "uri": "/object/:object_id/instance/:instance_id/_relation_count"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "object_id",
            "type": "object_id",
            "description": "模型ID"
          },
          {
            "name": "instance_id",
            "type": "instance_id",
            "description": "实例ID"
          }
        ],
        "required": ["object_id", "instance_id"]
      },
      "response": {
        "type": "map"
      }
    },
    {
      "contract": "cmdb.instance.InstanceSnapshot",
      "name": "InstanceSnapshot",
      "version": "1.0.0",
      "description": "查询指定版本实例快照",
      "endpoint": {
        "method": "GET",
        "uri": "/history/object/:object_id/instance/:instance_id"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "object_id",
            "type": "object_id",
            "description": "模型对象ID"
          },
          {
            "name": "instance_id",
            "type": "instance_id",
            "description": "实例ID"
          },
          {
            "name": "_version",
            "type": "int",
            "description": "版本号",
            "validate": {
              "gte": 0
            }
          },
          {
            "name": "_ts",
            "type": "int",
            "description": "操作时间",
            "validate": {
              "gte": 0
            }
          }
        ],
        "required": ["object_id", "instance_id", "_version", "_ts"]
      },
      "response": {
        "type": "map"
      }
    },
    {
      "contract": "cmdb.instance.ListInstance",
      "name": "ListInstance",
      "version": "1.0.0",
      "description": "实例分页列表查询",
      "endpoint": {
        "method": "GET",
        "uri": "/object/:object_id/instance"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "object_id",
            "type": "object_id",
            "description": "实例所属的模型ID"
          },
          {
            "name": "page",
            "type": "page",
            "description": "页码"
          },
          {
            "name": "page_size",
            "type": "page_size",
            "description": "页大小"
          },
          {
            "name": "only_relation_view",
            "type": "bool",
            "description": "对于关联的实例数据是否只获取relation_view中指定的属性"
          },
          {
            "name": "select_relations",
            "type": "string",
            "description": "需要返回的关系，多个用逗号分隔如`owner,tester.name,tester.instanceId`，如果只需要属性字段传`*`就好，注意：建议都指定fields，按需拉取字段，不然有可能返回数据量太大而导致接口慢系统不稳定"
          },
          {
            "name": "relation_limit",
            "type": "int",
            "description": "限制fields所带出的关系的数量， 0为不限制"
          }
        ],
        "required": ["object_id"]
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "list",
            "type": "map[]",
            "description": "instance list"
          },
          {
            "name": "total",
            "type": "int",
            "description": "实例总数"
          },
          {
            "name": "page",
            "type": "page",
            "description": "页码"
          },
          {
            "name": "page_size",
            "type": "page_size",
            "description": "页大小"
          }
        ],
        "required": ["list", "total", "page", "page_size"]
      }
    },
    {
      "contract": "cmdb.instance.ListInstanceQueryStrategy",
      "name": "ListInstanceQueryStrategy",
      "version": "1.0.0",
      "description": "获取实例查询策略列表",
      "endpoint": {
        "method": "GET",
        "uri": "/object/:object_id/query/strategy"
      },
      "import": ["easyops/model/cmdb/instance_query_strategy"],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "object_id",
            "type": "object_id",
            "description": "模型对象ID"
          },
          {
            "name": "type",
            "type": "string",
            "description": "策略类型"
          }
        ],
        "required": ["object_id"]
      },
      "response": {
        "wrapper": false,
        "type": "object",
        "fields": [
          {
            "name": "code",
            "type": "int",
            "description": "返回码"
          },
          {
            "name": "error",
            "type": "string",
            "description": "页码"
          },
          {
            "name": "message",
            "type": "string",
            "description": "返回信息"
          },
          {
            "name": "data",
            "type": "InstanceQueryStrategy[]",
            "description": "数据"
          }
        ]
      }
    },
    {
      "contract": "cmdb.instance.MixCreateInstance",
      "name": "MixCreateInstance",
      "version": "1.0.0",
      "description": "批量创建实例",
      "detail": "提供多模型实例混合创建接口,不支持关系创建(此接口是保证事务的)",
      "endpoint": {
        "method": "POST",
        "uri": "/mix/object/instance/create"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "data",
            "type": "map[]",
            "description": "实例列表,实例数据里需要有_object_id字段"
          }
        ],
        "required": ["data"]
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "list",
            "type": "string[]",
            "description": "实例Id列表,与请求的顺序一致"
          }
        ],
        "required": ["list"]
      }
    },
    {
      "contract": "cmdb.instance.MixDeleteInstance",
      "name": "MixDeleteInstance",
      "version": "1.0.0",
      "description": "批量删除实例",
      "detail": "提供多模型实例混合删除接口(此接口是保证事务的)",
      "endpoint": {
        "method": "POST",
        "uri": "/mix/object/instance/delete"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "data",
            "type": "object[]",
            "fields": [
              {
                "name": "_object_id",
                "type": "object_id",
                "description": "模型Id"
              },
              {
                "name": "instanceId",
                "type": "instance_id",
                "description": "实例Id"
              }
            ],
            "description": "实例列表"
          }
        ],
        "required": ["data"]
      },
      "response": null
    },
    {
      "contract": "cmdb.instance.MixUpdateInstance",
      "name": "MixUpdateInstance",
      "version": "1.0.0",
      "description": "批量更新实例",
      "detail": "提供多模型实例混合更新接口,不支持关系更新(此接口是保证事务的)",
      "endpoint": {
        "method": "POST",
        "uri": "/mix/object/instance/update"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "data",
            "type": "map[]",
            "description": "实例列表,实例数据里需要有_object_id,instanceId字段"
          }
        ],
        "required": ["data"]
      },
      "response": null
    },
    {
      "contract": "cmdb.instance.PostSearch",
      "name": "PostSearch",
      "version": "1.1.0",
      "description": "搜索实例",
      "endpoint": {
        "method": "POST",
        "uri": "/object/:objectId/instance/_search"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "objectId",
            "type": "object_id",
            "description": "模型对象ID"
          },
          {
            "name": "query",
            "type": "map",
            "description": "e.g.: { name: { $like: '%q%' } }, { $or: [{ name: { $like: '%q%' }}] }"
          },
          {
            "name": "fields",
            "type": "map",
            "description": "e.g.: { instanceId: true, name: true, owner.name: true}， *代表所有普通属性， 注意：建议都指定fields，按需拉取字段，不然有可能返回数据量太大而导致接口慢系统不稳定"
          },
          {
            "name": "only_my_instance",
            "type": "bool",
            "description": "当为 true 时，只搜索与我相关实例"
          },
          {
            "name": "only_relation_view",
            "type": "bool",
            "description": "对于关联的实例数据是否只获取 relation_view 中指定的属性， 这个字段为 true 时， 会覆盖 fields 字段中指定的二级字段设置"
          },
          {
            "name": "page",
            "type": "page",
            "description": "页码"
          },
          {
            "name": "page_size",
            "type": "page_size",
            "description": "页大小"
          },
          {
            "name": "sort",
            "type": "map",
            "description": "按字段排序， 留空默认按照实例ID降序排序(1表示升序， -1表示降序, 2表示自然升序， -2表示自然降序) e.g.: { instanceId: 1 }"
          },
          {
            "name": "permission",
            "type": "string[]",
            "description": "按照权限过滤(通用实例都有 read， update， delete 权限控制， 主机实例在通用实例权限基础上有额外的 operate 权限， 应用实例在通用实例权限基础上有额外的 developClusterOperate， testClusterOperate， prereleaseClusterOperate， productionClusterOperate 权限) e.g.: [ \"operate\", \"update\" ]"
          },
          {
            "name": "relation_limit",
            "type": "int",
            "description": "限制fields所带出的关系的数量， 0为不限制，全局配置"
          },
          {
            "name": "limitations",
            "type": "object[]",
            "fields": [
              {
                "name": "field",
                "type": "string",
                "description": "关系id， 支持多级关系， 如owner， owner.app"
              },
              {
                "name": "limit",
                "type": "int",
                "description": "关系数量限制， 0为不限制， 优先级高于relation_limit"
              },
              {
                "name": "sort",
                "type": "object[]",
                "fields": [
                  {
                    "name": "key",
                    "type": "string",
                    "description": "属性id"
                  },
                  {
                    "name": "order",
                    "type": "int",
                    "description": "1表示升序， -1表示降序, 2表示自然升序， -2表示自然降序"
                  }
                ],
                "description": "关系排序"
              }
            ],
            "description": "单独指定关系的limit与sort"
          }
        ],
        "default": {
          "page": 1,
          "page_size": 30,
          "only_my_instance": false,
          "only_relation_view": false
        },
        "required": ["objectId"]
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "list",
            "type": "map[]",
            "description": "instance list"
          },
          {
            "name": "total",
            "type": "int",
            "description": "实例总数"
          },
          {
            "name": "page",
            "type": "page",
            "description": "页码"
          },
          {
            "name": "page_size",
            "type": "page_size",
            "description": "页大小"
          }
        ]
      }
    },
    {
      "contract": "cmdb.instance.PostSearchV2",
      "name": "PostSearchV2",
      "version": "1.1.0",
      "description": "搜索实例V2",
      "detail": "支持多属性排序",
      "endpoint": {
        "method": "POST",
        "uri": "/v2/object/:objectId/instance/_search"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "objectId",
            "type": "object_id",
            "description": "模型对象ID"
          },
          {
            "name": "query",
            "type": "map",
            "description": "e.g.: { name: { $like: '%q%' } }, { $or: [{ name: { $like: '%q%' }}] }"
          },
          {
            "name": "query_context",
            "type": "map",
            "description": "查询条件模板上下文 模板格式为 @{key} ,e.g.: query:{ name: { $like: '%@{key1}%'}, int: '@{key2}' }, query_context:{ key1: 'val1', 'key2': 12 }, query则会被转换成{ name: { $like: '%val1%' }, int: 12 }, 如果key1对应的值为null或者空字符串, query则会被转换成{ int: 12 }"
          },
          {
            "name": "fields",
            "type": "map",
            "description": "e.g.: { instanceId: true, name: true, owner.name: true}， *代表所有普通属性， 注意：建议都指定fields，按需拉取字段，不然有可能返回数据量太大而导致接口慢系统不稳定"
          },
          {
            "name": "only_my_instance",
            "type": "bool",
            "description": "当为 true 时，只搜索与我相关实例"
          },
          {
            "name": "page",
            "type": "page",
            "description": "页码"
          },
          {
            "name": "page_size",
            "type": "page_size",
            "description": "页大小"
          },
          {
            "name": "sort",
            "type": "object[]",
            "fields": [
              {
                "name": "key",
                "type": "string",
                "description": "属性id"
              },
              {
                "name": "order",
                "type": "int",
                "enum": [-1, 1, -2, 2],
                "description": "1表示升序， -1表示降序, 2表示自然升序， -2表示自然降序"
              }
            ],
            "description": "按字段排序， 留空默认按照实例ID降序排序(1表示升序， -1表示降序, 2表示自然升序， -2表示自然降序) e.g.: [{ key: instanceId, order: 1}]"
          },
          {
            "name": "permission",
            "type": "string[]",
            "description": "按照权限过滤(通用实例都有 read， update， delete 权限控制， 主机实例在通用实例权限基础上有额外的 operate 权限， 应用实例在通用实例权限基础上有额外的 developClusterOperate， testClusterOperate， prereleaseClusterOperate， productionClusterOperate 权限) e.g.: [ \"operate\", \"update\" ]"
          },
          {
            "name": "relation_limit",
            "type": "int",
            "description": "限制fields所带出的关系的数量， 0为不限制，全局配置"
          },
          {
            "name": "limitations",
            "type": "object[]",
            "fields": [
              {
                "name": "field",
                "type": "string",
                "description": "关系id， 支持多级关系， 如owner， owner.app"
              },
              {
                "name": "limit",
                "type": "int",
                "description": "关系数量限制， 0为不限制， 优先级高于relation_limit"
              },
              {
                "name": "sort",
                "type": "object[]",
                "fields": [
                  {
                    "name": "key",
                    "type": "string",
                    "description": "属性id"
                  },
                  {
                    "name": "order",
                    "type": "int",
                    "enum": [-1, 1, -2, 2],
                    "description": "1表示升序， -1表示降序, 2表示自然升序， -2表示自然降序"
                  }
                ],
                "description": "关系排序"
              }
            ],
            "description": "单独指定关系的limit与sort"
          }
        ],
        "default": {
          "page": 1,
          "page_size": 30,
          "only_my_instance": false
        },
        "required": ["objectId", "fields"]
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "list",
            "type": "map[]",
            "description": "instance list"
          },
          {
            "name": "total",
            "type": "int",
            "description": "实例总数"
          },
          {
            "name": "page",
            "type": "page",
            "description": "页码"
          },
          {
            "name": "page_size",
            "type": "page_size",
            "description": "页大小"
          }
        ]
      }
    },
    {
      "contract": "cmdb.instance.PostSearchV3",
      "name": "PostSearchV3",
      "version": "1.1.0",
      "description": "搜索实例V3",
      "detail": "支持多属性排序",
      "endpoint": {
        "method": "POST",
        "uri": "/v3/object/:objectId/instance/_search"
      },
      "import": ["easyops/model/cmdb/search_sort"],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "objectId",
            "type": "object_id",
            "description": "模型对象ID"
          },
          {
            "name": "query",
            "type": "map",
            "description": "e.g.: { name: { $like: '%q%' } }, { $or: [{ name: { $like: '%q%' }}] }"
          },
          {
            "name": "query_context",
            "type": "map",
            "description": "查询条件模板上下文 模板格式为 @{key} ,e.g.: query:{ name: { $like: '%@{key1}%'}, int: '@{key2}' }, query_context:{ key1: 'val1', 'key2': 12 }, query则会被转换成{ name: { $like: '%val1%' }, int: 12 }, 如果key1对应的值为null或者空字符串, query则会被转换成{ int: 12 }"
          },
          {
            "name": "fields",
            "type": "string[]",
            "description": "指定返回字段(支持通过父模型指定子模型属性)(支持关系数据的二级jsonPath格式的指定字段如clusters.name), e.g.: [name, instanceId]"
          },
          {
            "name": "only_my_instance",
            "type": "bool",
            "description": "当为 true 时，只搜索与我相关实例"
          },
          {
            "name": "page",
            "type": "page",
            "description": "页码"
          },
          {
            "name": "page_size",
            "type": "page_size",
            "description": "页大小"
          },
          {
            "name": "sort",
            "type": "object[]",
            "fields": [
              {
                "name": "key",
                "type": "string",
                "description": "属性id"
              },
              {
                "name": "order",
                "type": "int",
                "enum": [-1, 1, -2, 2],
                "description": "1表示升序， -1表示降序, 2表示自然升序， -2表示自然降序"
              }
            ],
            "description": "按字段排序， 留空默认按照实例ID降序排序(1表示升序， -1表示降序, 2表示自然升序， -2表示自然降序) e.g.: [{ key: instanceId, order: 1}]"
          },
          {
            "name": "permission",
            "type": "string[]",
            "description": "按照权限过滤(通用实例都有 read， update， delete 权限控制， 主机实例在通用实例权限基础上有额外的 operate 权限， 应用实例在通用实例权限基础上有额外的 developClusterOperate， testClusterOperate， prereleaseClusterOperate， productionClusterOperate 权限) e.g.: [ \"operate\", \"update\" ]"
          },
          {
            "name": "relation_limit",
            "type": "int",
            "description": "限制fields所带出的关系的数量， 0为不限制，全局配置"
          },
          {
            "name": "limitations",
            "type": "object[]",
            "fields": [
              {
                "name": "field",
                "type": "string",
                "description": "关系id， 支持多级关系， 如owner， owner.app"
              },
              {
                "name": "limit",
                "type": "int",
                "description": "关系数量限制， 0为不限制， 优先级高于relation_limit"
              },
              {
                "name": "sort",
                "type": "object[]",
                "fields": [
                  {
                    "name": "key",
                    "type": "string",
                    "description": "属性id"
                  },
                  {
                    "name": "order",
                    "type": "int",
                    "enum": [-1, 1, -2, 2],
                    "description": "1表示升序， -1表示降序, 2表示自然升序， -2表示自然降序"
                  }
                ],
                "description": "关系排序"
              }
            ],
            "description": "单独指定关系的limit与sort"
          },
          {
            "name": "ignore_missing_field_error",
            "type": "bool",
            "description": "是否忽略fields有不存在的字段的报错"
          },
          {
            "name": "metrics_filter",
            "type": "object",
            "fields": [
              {
                "name": "time_range",
                "type": "object",
                "fields": [
                  {
                    "name": "start_time",
                    "type": "int",
                    "description": "起始时间，秒"
                  },
                  {
                    "name": "end_time",
                    "type": "int",
                    "description": "终止时间，秒"
                  }
                ],
                "description": "指标查询时间范围"
              },
              {
                "name": "tags_filter",
                "type": "map",
                "description": "指标维度查询"
              },
              {
                "name": "limitations",
                "type": "object[]",
                "fields": [
                  {
                    "name": "metric",
                    "type": "string",
                    "description": "指标名"
                  },
                  {
                    "name": "limit",
                    "type": "int",
                    "description": "指标数据limit"
                  },
                  {
                    "name": "sort",
                    "type": "SearchSort[]",
                    "description": "指标数据sort"
                  }
                ],
                "description": "指标数据limit，sort"
              }
            ],
            "description": "指标数据查询"
          }
        ],
        "default": {
          "page": 1,
          "page_size": 30,
          "only_my_instance": false
        },
        "required": ["objectId", "fields"]
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "list",
            "type": "map[]",
            "description": "instance list"
          },
          {
            "name": "total",
            "type": "int",
            "description": "实例总数"
          },
          {
            "name": "page",
            "type": "page",
            "description": "页码"
          },
          {
            "name": "page_size",
            "type": "page_size",
            "description": "页大小"
          }
        ]
      }
    },
    {
      "contract": "cmdb.instance.RelationCountAggregate",
      "name": "RelationCountAggregate",
      "version": "1.0.0",
      "description": "实例关系数量统计",
      "endpoint": {
        "method": "POST",
        "uri": "/object/:objectId/instance/_relation_count_aggregate"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "objectId",
            "type": "object_id",
            "description": "模型对象ID"
          },
          {
            "name": "query",
            "type": "map",
            "description": "e.g.: { name: { $like: '%q%' } }, { $or: [{ name: { $like: '%q%' }}] }"
          },
          {
            "name": "relation_side_ids",
            "type": "object_attr_id[]",
            "validate": {
              "gte": 1
            },
            "description": "关系sideId,例如APP的owner"
          },
          {
            "name": "only_my_instance",
            "type": "bool",
            "description": "当为 true 时，只搜索与我相关实例"
          }
        ],
        "required": [
          "objectId",
          "query",
          "relation_side_ids",
          "only_my_instance"
        ]
      },
      "response": {
        "wrapper": false,
        "type": "object",
        "fields": [
          {
            "name": "code",
            "type": "int",
            "description": "返回码"
          },
          {
            "name": "error",
            "type": "string",
            "description": "错误信息"
          },
          {
            "name": "message",
            "type": "string",
            "description": "返回消息"
          },
          {
            "name": "data",
            "type": "object[]",
            "fields": [
              {
                "name": "key",
                "type": "object_attr_id",
                "description": "关系sideId"
              },
              {
                "name": "value",
                "type": "int",
                "description": "关系个数"
              }
            ],
            "description": "关系数量统计结果"
          }
        ],
        "required": ["code", "error", "message", "data"]
      }
    },
    {
      "contract": "cmdb.instance.RelationMaxCheck",
      "name": "RelationMaxCheck",
      "version": "1.1.0",
      "description": "搜索实例列表指定关系是否大于等于max约束",
      "detail": "一般用于新建实例关系时查询数据用, 会标识出实例数据是否超出关系限定的max(_relation_is_max),支持的查询操作与 [实例搜索接口] 关键字一致",
      "endpoint": {
        "method": "POST",
        "uri": "/object/:objectId/instance/_search_relation_max_check"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "objectId",
            "type": "object_id",
            "description": "资源模型ID"
          },
          {
            "name": "relation_id",
            "type": "object_relation_id",
            "description": "资源模型关系ID"
          },
          {
            "name": "relation_side_id",
            "type": "object_attr_id",
            "description": "left_id或者right_id来指定资源模型在关系的哪一端"
          },
          {
            "name": "query",
            "type": "map",
            "description": "查询条件,与[实例搜索接口]的query字段说明一致"
          },
          {
            "name": "sort",
            "type": "map",
            "description": "按字段排序, 留空默认按照实例ID降序排序(1表示升序， -1表示降序, 2表示自然升序， -2表示自然降序)"
          },
          {
            "name": "permission",
            "type": "string[]",
            "description": "按照权限过滤(通用实例都有`read`, `update`, `delete`权限控制, 主机实例在通用实例权限基础上有额外的`operate`权限, 应用实例在通用实例权限基础上有额外的`developClusterOperate`, `testClusterOperate`, `prereleaseClusterOperate`, `productionClusterOperate`权限)"
          },
          {
            "name": "page",
            "type": "page",
            "description": "页码"
          },
          {
            "name": "page_size",
            "type": "page_size",
            "description": "页大小"
          }
        ],
        "default": {
          "page": 1,
          "page_size": 30
        },
        "required": ["relation_id", "relation_side_id"]
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "total",
            "type": "int",
            "description": "总数"
          },
          {
            "name": "page",
            "type": "page",
            "description": "页码"
          },
          {
            "name": "page_size",
            "type": "page_size",
            "description": "页大小"
          },
          {
            "name": "list",
            "type": "object[]",
            "fields": [
              {
                "name": "instanceId",
                "type": "instance_id",
                "description": "实例Id"
              },
              {
                "name": "_relation_is_max",
                "type": "bool",
                "description": "_relation_is_max"
              }
            ],
            "description": "数据列表"
          }
        ],
        "required": ["total", "page", "page_size", "list"]
      }
    },
    {
      "contract": "cmdb.instance.SearchTotal",
      "name": "SearchTotal",
      "version": "1.0.0",
      "description": "搜索总数",
      "endpoint": {
        "method": "POST",
        "uri": "/object/:objectId/instance/_search_total"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "objectId",
            "type": "object_id",
            "description": "模型对象ID"
          },
          {
            "name": "query",
            "type": "map",
            "description": "查询条件, 与[实例搜索接口]的query字段说明一致"
          },
          {
            "name": "permission",
            "type": "string[]",
            "description": "按照权限过滤[权限列表]"
          },
          {
            "name": "only_my_instance",
            "type": "bool",
            "description": "是否只获取与自己有关的那部分数据, 默认为false"
          }
        ],
        "default": {
          "only_my_instance": false
        },
        "required": ["objectId"]
      },
      "response": {
        "wrapper": false,
        "type": "object",
        "fields": [
          {
            "name": "code",
            "type": "int",
            "description": "返回码"
          },
          {
            "name": "error",
            "type": "string",
            "description": "错误信息"
          },
          {
            "name": "message",
            "type": "string",
            "description": "返回消息"
          },
          {
            "name": "data",
            "type": "int",
            "description": "实例总数"
          }
        ],
        "required": ["code", "error", "message", "data"]
      }
    },
    {
      "contract": "cmdb.instance.UpdateByQuery",
      "name": "UpdateByQuery",
      "version": "1.0.0",
      "description": "根据查询条件更新实例",
      "endpoint": {
        "method": "POST",
        "uri": "/object/:object_id/instance/update_by_query"
      },
      "import": ["easyops/model/cmdb/update_by_query_result"],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "object_id",
            "type": "object_id",
            "description": "objectId"
          },
          {
            "name": "query",
            "type": "map",
            "description": "e.g.: { name: { $like: '%q%' } }, { $or: [{ name: { $like: '%q%' }}] }"
          },
          {
            "name": "data",
            "type": "map",
            "description": "要更新的数据"
          }
        ]
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "successResult",
            "type": "UpdateByQueryResult[]",
            "description": "实例更新成功结果"
          },
          {
            "name": "failResult",
            "type": "UpdateByQueryResult[]",
            "description": "实例更新失败结果"
          },
          {
            "name": "total",
            "type": "int",
            "description": "查询实例总数"
          },
          {
            "name": "successTotal",
            "type": "int",
            "description": "更新成功总数"
          },
          {
            "name": "failTotal",
            "type": "int",
            "description": "更新失败总数"
          }
        ]
      }
    },
    {
      "contract": "cmdb.instance.UpdateInstance",
      "name": "UpdateInstance",
      "version": "1.0.0",
      "description": "更新实例",
      "endpoint": {
        "method": "PUT",
        "uri": "/object/:objectId/instance/:instanceId",
        "ext_fields": [
          {
            "name": "instance",
            "source": "body"
          }
        ]
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "objectId",
            "type": "object_id",
            "description": "objectId"
          },
          {
            "name": "instanceId",
            "type": "instance_id",
            "description": "instanceId"
          },
          {
            "name": "instance",
            "type": "map",
            "description": "要更新的实例"
          },
          {
            "name": "only_instance_id",
            "type": "bool",
            "description": "是否只返回实例id"
          }
        ],
        "default": {
          "only_instance_id": false
        }
      },
      "response": {
        "type": "map"
      }
    },
    {
      "contract": "cmdb.instance.UpdateInstanceQueryStrategy",
      "name": "UpdateInstanceQueryStrategy",
      "version": "1.0.0",
      "description": "更新实例查询策略",
      "endpoint": {
        "method": "PUT",
        "uri": "/object/:objectId/query/strategy/:strategyId"
      },
      "import": ["easyops/model/cmdb/instance_query_strategy"],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "objectId",
            "type": "object_id",
            "description": "模型对象ID"
          },
          {
            "name": "strategyId",
            "type": "string",
            "description": "策略ID"
          },
          {
            "ref": "InstanceQueryStrategy.name"
          },
          {
            "ref": "InstanceQueryStrategy.type"
          },
          {
            "ref": "InstanceQueryStrategy.instance_type"
          },
          {
            "ref": "InstanceQueryStrategy.query"
          },
          {
            "ref": "InstanceQueryStrategy.fields"
          }
        ],
        "required": ["objectId", "strategyId", "InstanceQueryStrategy.name"]
      },
      "response": {
        "type": "InstanceQueryStrategy"
      }
    },
    {
      "contract": "cmdb.instance.UpdateInstanceV2",
      "name": "UpdateInstanceV2",
      "version": "1.0.0",
      "description": "更新实例V2",
      "detail": "支持关系更新",
      "endpoint": {
        "method": "PUT",
        "uri": "/v2/object/:objectId/instance/:instanceId",
        "ext_fields": [
          {
            "name": "instance",
            "source": "body"
          }
        ]
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "objectId",
            "type": "object_id",
            "description": "objectId"
          },
          {
            "name": "instanceId",
            "type": "instance_id",
            "description": "instanceId"
          },
          {
            "name": "instance",
            "type": "map",
            "description": "要更新的实例"
          },
          {
            "name": "only_instance_id",
            "type": "bool",
            "description": "是否只返回实例id"
          }
        ],
        "default": {
          "only_instance_id": false
        }
      },
      "response": {
        "type": "map"
      }
    },
    {
      "contract": "cmdb.instance.UpdatePermissionBatch",
      "name": "UpdatePermissionBatch",
      "version": "1.0.0",
      "description": "批量修改实例权限",
      "endpoint": {
        "method": "PUT",
        "uri": "/permission/:objectId/instances/_batch"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "objectId",
            "type": "object_id",
            "description": "资源模型ID"
          },
          {
            "name": "ids",
            "type": "instance_id[]",
            "description": "实例ID列表"
          },
          {
            "name": "field",
            "type": "string",
            "description": "权限字段"
          },
          {
            "name": "fields",
            "type": "string[]",
            "enum": [
              "updateAthorizers",
              "deleteAuthorizers",
              "readAuthorizers",
              "operateAuthorizers"
            ],
            "description": "updateAthorizers, deleteAuthorizers, readAuthorizers, operateAuthorizers中的一个或多个"
          },
          {
            "name": "method",
            "type": "string",
            "enum": ["overwrite", "append", "pull"],
            "description": "修改操作的类型(overwrite, append, pull)(在枚举之外的操作类型会报错)"
          },
          {
            "name": "list",
            "type": "string[]",
            "description": "用户,用户组列表"
          }
        ],
        "required": ["objectId", "ids", "method", "list"]
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "noAuthorizedList",
            "type": "map[]",
            "description": "没有权限更新的实例列表"
          }
        ]
      }
    },
    {
      "contract": "cmdb.instance.ValidateInstance",
      "name": "ValidateInstance",
      "version": "1.0.0",
      "description": "实例校验",
      "endpoint": {
        "method": "POST",
        "uri": "/object/:objectId/instance/validate"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "objectId",
            "type": "object_id",
            "description": "实例所属的模型ID"
          },
          {
            "name": "instances",
            "type": "map[]",
            "description": "实例数据列表"
          }
        ],
        "required": ["objectId", "instances"]
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "list",
            "type": "object[]",
            "fields": [
              {
                "name": "code",
                "type": "int",
                "description": "状态码"
              },
              {
                "name": "error",
                "type": "string",
                "description": "错误信息，空为合法"
              },
              {
                "name": "data",
                "type": "map",
                "description": "实例数据"
              }
            ],
            "description": "校验结果"
          }
        ]
      }
    },
    {
      "contract": "cmdb.instance_archive.ActiveInstance",
      "name": "ActiveInstance",
      "version": "1.0.0",
      "description": "激活归档实例",
      "endpoint": {
        "method": "POST",
        "uri": "/object/:object_id/instance_active/:instance_id"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "object_id",
            "type": "object_id",
            "description": "实例所属的模型ID"
          },
          {
            "name": "instance_id",
            "type": "instance_id",
            "description": "实例Id"
          }
        ],
        "required": ["object_id", "instance_id"]
      },
      "response": null
    },
    {
      "contract": "cmdb.instance_archive.ArchiveInstance",
      "name": "ArchiveInstance",
      "version": "1.0.0",
      "description": "归档实例",
      "endpoint": {
        "method": "POST",
        "uri": "/object/:object_id/instance_archive/:instance_id"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "object_id",
            "type": "object_id",
            "description": "实例所属的模型ID"
          },
          {
            "name": "instance_id",
            "type": "instance_id",
            "description": "实例Id"
          }
        ],
        "required": ["object_id", "instance_id"]
      },
      "response": null
    },
    {
      "contract": "cmdb.instance_archive.BatchArchiveInstance",
      "name": "BatchArchiveInstance",
      "version": "1.0.0",
      "description": "批量归档实例",
      "endpoint": {
        "method": "POST",
        "uri": "/object/:object_id/instance_archive_instances"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "object_id",
            "type": "object_id",
            "description": "实例所属的模型ID"
          },
          {
            "name": "instanceIds",
            "type": "instance_id[]",
            "description": "实例Id列表"
          }
        ],
        "required": ["object_id", "instanceIds"]
      },
      "response": null
    },
    {
      "contract": "cmdb.instance_archive.BatchDeleteArchiveInstance",
      "name": "BatchDeleteArchiveInstance",
      "version": "1.0.0",
      "description": "批量删除归档实例",
      "endpoint": {
        "method": "DELETE",
        "uri": "/object/:object_id/instance_archive_instances"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "object_id",
            "type": "object_id",
            "description": "实例所属的模型ID"
          },
          {
            "name": "instanceIds",
            "type": "comma_separated_string",
            "description": "实例Id,使用逗号分隔"
          }
        ],
        "required": ["object_id", "instanceIds"]
      },
      "response": null
    },
    {
      "contract": "cmdb.instance_archive.DeleteArchiveInstance",
      "name": "DeleteArchiveInstance",
      "version": "1.0.0",
      "description": "删除归档实例",
      "endpoint": {
        "method": "DELETE",
        "uri": "/object/:object_id/instance_archive/:instance_id"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "object_id",
            "type": "object_id",
            "description": "实例所属的模型ID"
          },
          {
            "name": "instance_id",
            "type": "instance_id",
            "description": "实例Id"
          }
        ],
        "required": ["object_id", "instance_id"]
      },
      "response": null
    },
    {
      "contract": "cmdb.instance_archive.ExportArchiveInstanceExcel",
      "name": "ExportArchiveInstanceExcel",
      "version": "1.0.0",
      "description": "归档实例导出excel",
      "endpoint": {
        "method": "POST",
        "uri": "/export/object/:object_id/instance_archive/excel"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "object_id",
            "type": "object_id",
            "description": "模型对象ID"
          },
          {
            "name": "query",
            "type": "map",
            "description": "e.g.: { name: { $like: '%q%' } }, { $or: [{ name: { $like: '%q%' }}] }"
          },
          {
            "name": "fields",
            "type": "map",
            "description": "e.g.: { instanceId: true, name: true }, 默认导出所有字段"
          },
          {
            "name": "key_word",
            "type": "string",
            "description": "筛选#showKey对应的字段"
          }
        ],
        "required": ["object_id"]
      },
      "response": {
        "type": "file"
      }
    },
    {
      "contract": "cmdb.instance_archive.ListArchiveInstance",
      "name": "ListArchiveInstance",
      "version": "1.0.0",
      "description": "归档实例分页列表查询",
      "endpoint": {
        "method": "GET",
        "uri": "/object/:object_id/instance_archive"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "object_id",
            "type": "object_id",
            "description": "实例所属的模型ID"
          },
          {
            "name": "page",
            "type": "page",
            "description": "页码"
          },
          {
            "name": "page_size",
            "type": "page_size",
            "description": "页大小"
          },
          {
            "name": "key_word",
            "type": "string",
            "description": "筛选#showKey对应的字段"
          }
        ],
        "required": ["object_id"],
        "default": {
          "page": 1,
          "page_size": 200
        }
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "list",
            "type": "map[]",
            "description": "instance list"
          },
          {
            "name": "total",
            "type": "int",
            "description": "实例总数"
          },
          {
            "name": "page",
            "type": "page",
            "description": "页码"
          },
          {
            "name": "page_size",
            "type": "page_size",
            "description": "页大小"
          }
        ],
        "required": ["list", "total", "page", "page_size"]
      }
    },
    {
      "contract": "cmdb.instance_graph.TraverseGraph",
      "name": "TraverseGraph",
      "version": "1.0.0",
      "description": "图遍历查询",
      "endpoint": {
        "method": "POST",
        "uri": "/instance/traverse"
      },
      "import": ["easyops/model/cmdb/traverse_child_node"],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "object_id",
            "type": "object_id",
            "description": "模型Id"
          },
          {
            "name": "query",
            "type": "map",
            "description": "实例的过滤条件 (过滤条件不仅支持属性的过滤，也支持关系字段的过滤)"
          },
          {
            "name": "fields",
            "type": "map",
            "description": "指定返回此关系指向模型的fields"
          },
          {
            "name": "child",
            "type": "TraverseChildNode[]",
            "description": "子节点列表"
          }
        ],
        "required": ["object_id", "fields", "query", "child"]
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "topic_vertices",
            "type": "map[]",
            "description": "根节点实例列表"
          },
          {
            "name": "vertices",
            "type": "map[]",
            "description": "节点实例列表"
          },
          {
            "name": "edges",
            "type": "object[]",
            "fields": [
              {
                "name": "relation_id",
                "type": "string",
                "description": "关系Id"
              },
              {
                "name": "out",
                "type": "string",
                "description": "实例Id"
              },
              {
                "name": "in",
                "type": "string",
                "description": "实例Id, 例如:「 应用的负责人 」 这一关系数据中, 「应用」数据是 out, 「用户」数据是 in"
              },
              {
                "name": "out_name",
                "type": "string",
                "description": "关系别名"
              }
            ],
            "description": "关系列表"
          }
        ],
        "required": ["topic_vertices", "vertices", "edges"]
      }
    },
    {
      "contract": "cmdb.instance_graph.TraverseGraphCount",
      "name": "TraverseGraphCount",
      "version": "1.0.0",
      "description": "图遍历查询叶子节点个数统计",
      "detail": "图遍历查询叶子节点个数统计,fields不用传",
      "endpoint": {
        "method": "POST",
        "uri": "/instance/traverse/count"
      },
      "import": ["easyops/model/cmdb/traverse_child_node"],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "object_id",
            "type": "object_id",
            "description": "模型Id"
          },
          {
            "name": "query",
            "type": "map",
            "description": "实例的过滤条件 (过滤条件不仅支持属性的过滤，也支持关系字段的过滤)"
          },
          {
            "name": "fields",
            "type": "map",
            "description": "指定返回此关系指向模型的fields"
          },
          {
            "name": "child",
            "type": "TraverseChildNode[]",
            "description": "子节点列表"
          }
        ],
        "required": ["object_id", "query", "child"]
      },
      "response": {
        "type": "object[]",
        "fields": [
          {
            "name": "object_id",
            "type": "object_id",
            "description": "根节点模型Id"
          },
          {
            "name": "instanceId",
            "type": "instance_id",
            "description": "根节点instanceId"
          },
          {
            "name": "list",
            "type": "object[]",
            "fields": [
              {
                "name": "object_id",
                "type": "object_id",
                "description": "叶子节点模型Id"
              },
              {
                "name": "path",
                "type": "string",
                "description": "路径，eg: a.b.c"
              },
              {
                "name": "count",
                "type": "int",
                "description": "节点个数"
              }
            ],
            "description": "叶子节点个数统计"
          }
        ],
        "required": ["object_id", "instanceId", "list"]
      }
    },
    {
      "contract": "cmdb.instance_graph.TraverseGraphV2",
      "name": "TraverseGraphV2",
      "version": "1.0.0",
      "description": "图遍历查询v2,",
      "endpoint": {
        "method": "POST",
        "uri": "/v2/instance/traverse"
      },
      "import": ["easyops/model/cmdb/traverse_child_node_v2"],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "object_id",
            "type": "object_id",
            "description": "模型Id"
          },
          {
            "name": "query",
            "type": "map",
            "description": "实例的过滤条件 (过滤条件不仅支持属性的过滤，也支持关系字段的过滤)"
          },
          {
            "name": "select_fields",
            "type": "string[]",
            "description": "指定返回此关系指向模型的fields,支持子模型属性"
          },
          {
            "name": "child",
            "type": "TraverseChildNodeV2[]",
            "description": "子节点列表"
          }
        ],
        "required": ["object_id", "select_fields", "query", "child"]
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "topic_vertices",
            "type": "map[]",
            "description": "根节点实例列表"
          },
          {
            "name": "vertices",
            "type": "map[]",
            "description": "节点实例列表"
          },
          {
            "name": "edges",
            "type": "object[]",
            "fields": [
              {
                "name": "relation_id",
                "type": "string",
                "description": "关系Id"
              },
              {
                "name": "out",
                "type": "string",
                "description": "实例Id"
              },
              {
                "name": "in",
                "type": "string",
                "description": "实例Id, 例如:「 应用的负责人 」 这一关系数据中, 「应用」数据是 out, 「用户」数据是 in"
              },
              {
                "name": "out_name",
                "type": "string",
                "description": "关系别名"
              }
            ],
            "description": "关系列表"
          }
        ],
        "required": ["topic_vertices", "vertices", "edges"]
      }
    },
    {
      "contract": "cmdb.instance_path_search.FlattenSearchPath",
      "name": "FlattenSearchPath",
      "version": "1.0.0",
      "description": "平铺的关系查询[废弃]",
      "endpoint": {
        "method": "POST",
        "uri": "/object/:object_id/instance/_flatten_search_path"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "object_id",
            "type": "object_id",
            "description": "模型Id"
          },
          {
            "name": "instanceIds",
            "type": "instance_id[]",
            "description": "instanceId列表"
          },
          {
            "name": "path",
            "type": "object[]",
            "fields": [
              {
                "name": "type",
                "type": "string",
                "enums": ["relation", "attribute"],
                "description": "类型"
              },
              {
                "name": "id",
                "type": "string",
                "description": "id"
              }
            ],
            "description": "路径列表"
          }
        ],
        "required": ["object_id", "instanceIds"]
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "total",
            "type": "int",
            "description": "结果总数"
          },
          {
            "name": "list",
            "type": "value",
            "description": "结果列表"
          }
        ]
      }
    },
    {
      "contract": "cmdb.instance_path_search.GroupSearchPath",
      "name": "GroupSearchPath",
      "version": "1.0.0",
      "description": "聚合的关系查询[废弃]",
      "endpoint": {
        "method": "POST",
        "uri": "/object/:object_id/instance/_group_search_path"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "object_id",
            "type": "object_id",
            "description": "模型Id"
          },
          {
            "name": "instanceIds",
            "type": "instance_id[]",
            "description": "instanceId列表"
          },
          {
            "name": "path",
            "type": "object[]",
            "fields": [
              {
                "name": "type",
                "type": "string",
                "enums": ["relation", "attribute"],
                "description": "类型"
              },
              {
                "name": "id",
                "type": "string",
                "description": "id"
              }
            ],
            "description": "路径列表"
          }
        ],
        "required": ["object_id", "instanceIds"]
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "total",
            "type": "int",
            "description": "结果总数"
          },
          {
            "name": "list",
            "type": "value",
            "description": "结果列表"
          }
        ]
      }
    },
    {
      "contract": "cmdb.instance_path_search.PathSearchExportV3",
      "name": "PathSearchExportV3",
      "version": "1.0.0",
      "description": "实例路径查询v3导出excel",
      "endpoint": {
        "method": "POST",
        "uri": "/v3/path/_search/export/excel"
      },
      "import": ["easyops/model/cmdb/strategy_path_node"],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "path",
            "type": "StrategyPathNode[]",
            "description": "查询路径"
          },
          {
            "name": "alias_id_sort",
            "type": "map",
            "description": "以alias_id表示的字段排序 {\"APP.name\": -1}"
          },
          {
            "name": "exportAllFields",
            "type": "bool",
            "description": "是否导出所有字段"
          }
        ],
        "required": ["path"]
      },
      "response": {
        "type": "file"
      }
    },
    {
      "contract": "cmdb.instance_path_search.PathSearchExportV4",
      "name": "PathSearchExportV4",
      "version": "1.0.0",
      "description": "实例路径查询v4导出excel",
      "endpoint": {
        "method": "POST",
        "uri": "/v4/path/_search/export/excel"
      },
      "import": ["easyops/model/cmdb/strategy_path_node"],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "path",
            "type": "StrategyPathNode[]",
            "description": "查询路径"
          },
          {
            "name": "alias_id_sort",
            "type": "map",
            "description": "以alias_id表示的字段排序 {\"APP.name\": -1}"
          },
          {
            "name": "exportAllFields",
            "type": "bool",
            "description": "是否导出所有字段"
          }
        ],
        "required": ["path"]
      },
      "response": {
        "type": "file"
      }
    },
    {
      "contract": "cmdb.instance_path_search.PathSearchV3",
      "name": "PathSearchV3",
      "version": "1.0.0",
      "description": "实例路径查询v3",
      "endpoint": {
        "method": "POST",
        "uri": "/v3/path/_search"
      },
      "import": ["easyops/model/cmdb/strategy_path_node"],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "path",
            "type": "StrategyPathNode[]",
            "description": "查询路径"
          },
          {
            "name": "alias_id_sort",
            "type": "map",
            "description": "以alias_id表示的字段排序 {\"APP.name\": -1}"
          },
          {
            "name": "page",
            "type": "page",
            "description": "页数"
          },
          {
            "name": "pageSize",
            "type": "page_size",
            "description": "页大小"
          }
        ],
        "required": ["path"]
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "page",
            "type": "page",
            "description": "页数"
          },
          {
            "name": "page_size",
            "type": "page_size",
            "description": "页大小"
          },
          {
            "name": "total",
            "type": "int",
            "description": "查询总数"
          },
          {
            "name": "list",
            "type": "value",
            "description": "结果列表 eg: [[{\"_object_id\": \"APP\",\"attrId1\": 2.355, \"instanceId\": \"xxxx\",\"name\": \"test1253\" },{\"_object_id\": \"CLUSTER\",\"instanceId\": \"xxxxx\",\"name\": \"dev\"}]]"
          }
        ]
      }
    },
    {
      "contract": "cmdb.instance_path_search.PathSearchV4",
      "name": "PathSearchV4",
      "version": "1.0.0",
      "description": "实例路径查询v4",
      "endpoint": {
        "method": "POST",
        "uri": "/v4/path/_search"
      },
      "import": ["easyops/model/cmdb/strategy_path_node"],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "path",
            "type": "StrategyPathNode[]",
            "description": "查询路径"
          },
          {
            "name": "alias_id_sort",
            "type": "map",
            "description": "以alias_id表示的字段排序 {\"APP.name\": -1}"
          },
          {
            "name": "page",
            "type": "page",
            "description": "页数"
          },
          {
            "name": "pageSize",
            "type": "page_size",
            "description": "页大小"
          }
        ],
        "required": ["path"]
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "root",
            "type": "int",
            "description": "起点个数"
          },
          {
            "name": "allPath",
            "type": "int",
            "description": "全量路径个数"
          },
          {
            "name": "list",
            "type": "value",
            "description": "结果列表 eg: [[{\"_object_id\": \"APP\",\"attrId1\": 2.355, \"instanceId\": \"xxxx\",\"name\": \"test1253\" },{\"_object_id\": \"CLUSTER\",\"instanceId\": \"xxxxx\",\"name\": \"dev\"}]]"
          }
        ]
      }
    },
    {
      "contract": "cmdb.instance_relation.Append",
      "name": "Append",
      "version": "1.0.0",
      "description": "批量添加关系",
      "endpoint": {
        "method": "POST",
        "uri": "/object/:objectId/relation/:relationSideId/append"
      },
      "import": ["easyops/model/cmdb/instance_relation_request"],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "objectId",
            "type": "object_id",
            "description": "模型Id"
          },
          {
            "name": "relationSideId",
            "type": "object_attr_id",
            "description": "关系sideId"
          },
          {
            "ref": "InstanceRelationRequest.*"
          }
        ],
        "required": ["objectId", "relationSideId"]
      },
      "response": null
    },
    {
      "contract": "cmdb.instance_relation.CountRelationInstance",
      "name": "CountRelationInstance",
      "version": "1.0.0",
      "description": "统计关系实例数量",
      "endpoint": {
        "method": "GET",
        "uri": "/object_relation/:relationId/relation_instance/_count_relation_instance"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "relationId",
            "type": "object_relation_id",
            "description": "关系Id"
          }
        ],
        "required": ["relationId"]
      },
      "response": {
        "wrapper": false,
        "type": "object",
        "fields": [
          {
            "name": "code",
            "type": "int",
            "description": "返回码"
          },
          {
            "name": "error",
            "type": "string",
            "description": "错误信息"
          },
          {
            "name": "message",
            "type": "string",
            "description": "返回消息"
          },
          {
            "name": "data",
            "type": "int",
            "description": "总数"
          }
        ],
        "required": ["code", "error", "message", "data"]
      }
    },
    {
      "contract": "cmdb.instance_relation.Discovery",
      "name": "Discovery",
      "version": "1.0.0",
      "description": "实例关系发现",
      "endpoint": {
        "method": "POST",
        "uri": "/object_relation/:relationId/_autodiscovery/multi"
      },
      "import": ["easyops/model/cmdb/auto_discovery_instance"],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "relationId",
            "type": "object_relation_id",
            "description": "关系Id"
          },
          {
            "name": "match",
            "type": "object[]",
            "fields": [
              {
                "name": "left_match",
                "type": "string[]",
                "description": "左侧实例匹配字段列表"
              },
              {
                "name": "right_match",
                "type": "string[]",
                "description": "右侧实例匹配字段列表"
              }
            ],
            "description": "发现实例的字段列表"
          },
          {
            "name": "data",
            "type": "object[]",
            "fields": [
              {
                "name": "left_instance",
                "type": "map",
                "description": "左侧匹配的实例数据"
              },
              {
                "name": "right_instance",
                "type": "map",
                "description": "右侧匹配的实例数据"
              }
            ],
            "description": "发现实例的数据列表"
          },
          {
            "name": "strict",
            "type": "bool",
            "description": "精确匹配（true: 只允许1:1关系，false: 允许1:n关系，默认true）"
          }
        ],
        "required": ["relationId", "match", "data"],
        "default": {
          "strict": true
        }
      },
      "response": {
        "type": "object[]",
        "fields": [
          {
            "name": "code",
            "type": "int",
            "description": "状态码（0：成功，非0：失败）"
          },
          {
            "name": "match_relation_instance_ids",
            "type": "string[]",
            "description": "[废弃字段] 关联的实例关系id"
          },
          {
            "name": "left_instance",
            "type": "AutoDiscoveryInstance",
            "description": "左侧实例详情"
          },
          {
            "name": "right_instance",
            "type": "AutoDiscoveryInstance",
            "description": "右侧实例详情"
          }
        ],
        "required": ["code", "left_instance", "right_instance"]
      }
    },
    {
      "contract": "cmdb.instance_relation.DiscoveryV2",
      "name": "DiscoveryV2",
      "version": "1.0.0",
      "description": "实例关系发现V2(支持set关系)",
      "endpoint": {
        "method": "POST",
        "uri": "/v2/object_relation/:relationId/_autodiscovery/multi"
      },
      "import": ["easyops/model/cmdb/instance_relation_pair"],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "relationId",
            "type": "object_relation_id",
            "description": "关系Id"
          },
          {
            "name": "match",
            "type": "object",
            "fields": [
              {
                "name": "left_match",
                "type": "string[]",
                "description": "左侧实例匹配字段列表"
              },
              {
                "name": "right_match",
                "type": "string[]",
                "description": "右侧实例匹配字段列表"
              }
            ],
            "description": "发现实例的字段列表"
          },
          {
            "name": "data",
            "type": "object[]",
            "fields": [
              {
                "name": "left_instance",
                "type": "map",
                "description": "左侧匹配的实例数据"
              },
              {
                "name": "right_instance",
                "type": "map",
                "description": "右侧匹配的实例数据"
              }
            ],
            "description": "发现实例的数据列表"
          },
          {
            "name": "strict",
            "type": "bool",
            "description": "精确匹配（true: 只允许1:1关系，false: 允许1:n关系，默认true）"
          },
          {
            "name": "operation",
            "type": "string",
            "enum": ["set", "append", "remove"],
            "description": "操作类型"
          },
          {
            "name": "mainSideId",
            "type": "string",
            "description": "采集关系主sideId，operation为set时必填，根据关系此边来设置关系"
          }
        ],
        "required": ["relationId", "match", "data", "operation"],
        "default": {
          "strict": true
        }
      },
      "response": {
        "wrapper": false,
        "type": "object",
        "fields": [
          {
            "name": "code",
            "type": "int",
            "description": "返回码"
          },
          {
            "name": "error",
            "type": "string",
            "description": "错误信息"
          },
          {
            "name": "message",
            "type": "string",
            "description": "返回信息"
          },
          {
            "name": "data",
            "type": "object[]",
            "description": "数据",
            "fields": [
              {
                "name": "code",
                "type": "int",
                "description": "状态码（0：成功，非0：失败）"
              },
              {
                "name": "message",
                "type": "string",
                "description": "状态描述"
              },
              {
                "name": "left_object_id",
                "type": "string",
                "description": "关系左端模型ID"
              },
              {
                "name": "right_object_id",
                "type": "string",
                "description": "关系右端模型ID"
              },
              {
                "name": "connect_success",
                "type": "InstanceRelationPair[]",
                "description": "创建实例关系成功列表"
              },
              {
                "name": "connect_fail",
                "type": "InstanceRelationPair[]",
                "description": "创建实例关系失败列表"
              },
              {
                "name": "disconnect_success",
                "type": "InstanceRelationPair[]",
                "description": "删除实例关系成功列表"
              },
              {
                "name": "disconnect_fail",
                "type": "InstanceRelationPair[]",
                "description": "删除实例关系失败列表"
              }
            ]
          }
        ]
      }
    },
    {
      "contract": "cmdb.instance_relation.InstanceRelationSnapshot",
      "name": "InstanceRelationSnapshot",
      "version": "1.0.0",
      "description": "查询历史实例关系快照",
      "endpoint": {
        "method": "GET",
        "uri": "/history/object_relation/:relation_id/relation_instance/:relation_instance_id"
      },
      "import": ["easyops/model/cmdb/object_relation"],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "relation_id",
            "type": "object_relation_id",
            "description": "关系ID"
          },
          {
            "name": "relation_instance_id",
            "type": "string",
            "description": "关系实例ID 关系id+左右实例ID "
          },
          {
            "name": "_ts",
            "type": "int",
            "description": "操作时间"
          }
        ],
        "required": ["relation_id", "relation_instance_id", "_ts"]
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "name": "_id",
            "type": "string",
            "description": "快照ID"
          },
          {
            "name": "_left_instance",
            "type": "object",
            "fields": [
              {
                "name": "instanceId",
                "type": "instance_id",
                "description": "实例ID"
              },
              {
                "name": "hostname",
                "type": "string",
                "description": "主机名"
              },
              {
                "name": "name",
                "type": "string",
                "description": "实例名称"
              },
              {
                "name": "_object_id",
                "type": "object_id",
                "description": "模型ID"
              },
              {
                "name": "_version",
                "type": "int",
                "description": "实例版本号"
              }
            ],
            "description": "左端实例数据"
          },
          {
            "name": "_operation",
            "type": "string",
            "description": "操作类型"
          },
          {
            "name": "_operator",
            "type": "string",
            "description": "操作用户"
          },
          {
            "name": "_relation_id",
            "type": "string",
            "description": "关系ID"
          },
          {
            "name": "_right_instance",
            "type": "object",
            "fields": [
              {
                "name": "instanceId",
                "type": "instance_id",
                "description": "实例ID"
              },
              {
                "name": "hostname",
                "type": "string",
                "description": "主机名"
              },
              {
                "name": "name",
                "type": "string",
                "description": "实例名称"
              },
              {
                "name": "_object_id",
                "type": "object_id",
                "description": "模型ID"
              },
              {
                "name": "_version",
                "type": "int",
                "description": "实例版本号"
              }
            ],
            "description": "右端实例数据"
          },
          {
            "name": "_ts",
            "type": "int",
            "description": "操作时间"
          },
          {
            "name": "_version",
            "type": "int",
            "description": "版本号"
          },
          {
            "name": "left_instance_id",
            "type": "instance_id",
            "description": "左端实例ID"
          },
          {
            "name": "right_instance_id",
            "type": "instance_id",
            "description": "右端实例ID"
          },
          {
            "name": "relation_instance_id",
            "type": "string",
            "description": "关系实例ID"
          }
        ]
      }
    },
    {
      "contract": "cmdb.instance_relation.Remove",
      "name": "Remove",
      "version": "1.0.0",
      "description": "批量移除关系",
      "endpoint": {
        "method": "POST",
        "uri": "/object/:objectId/relation/:relationSideId/remove"
      },
      "import": ["easyops/model/cmdb/instance_relation_request"],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "objectId",
            "type": "object_id",
            "description": "模型Id"
          },
          {
            "name": "relationSideId",
            "type": "object_attr_id",
            "description": "关系sideId"
          },
          {
            "ref": "InstanceRelationRequest.*"
          }
        ],
        "required": ["objectId", "relationSideId"]
      },
      "response": null
    },
    {
      "contract": "cmdb.instance_relation.Set",
      "name": "Set",
      "version": "1.0.0",
      "description": "批量设置关系",
      "endpoint": {
        "method": "POST",
        "uri": "/object/:objectId/relation/:relationSideId/set"
      },
      "import": ["easyops/model/cmdb/instance_relation_request"],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "objectId",
            "type": "object_id",
            "description": "模型Id"
          },
          {
            "name": "relationSideId",
            "type": "object_attr_id",
            "description": "关系sideId"
          },
          {
            "ref": "InstanceRelationRequest.*"
          }
        ],
        "required": ["objectId", "relationSideId"]
      },
      "response": null
    },
    {
      "contract": "cmdb.instance_tree.InstanceTree",
      "name": "InstanceTree",
      "version": "1.0.0",
      "description": "获取实例树完整数据",
      "endpoint": {
        "method": "POST",
        "uri": "/instance_tree/full"
      },
      "import": ["easyops/model/cmdb/instance_tree_root_node"],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "tree",
            "type": "InstanceTreeRootNode",
            "description": "树定义"
          },
          {
            "name": "ignore_single",
            "type": "bool",
            "description": "全局忽略与父级无关联实例,默认false"
          }
        ],
        "required": ["tree"],
        "default": {
          "ignore_single": false
        }
      },
      "response": {
        "type": "map"
      }
    },
    {
      "contract": "cmdb.instance_tree.InstanceTreeAnchor",
      "name": "InstanceTreeAnchor",
      "version": "1.0.0",
      "description": "实例树定位",
      "endpoint": {
        "method": "POST",
        "uri": "/instance_tree/anchor"
      },
      "import": ["easyops/model/cmdb/instance_tree_root_node"],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "tree",
            "type": "InstanceTreeRootNode",
            "description": "树定义"
          },
          {
            "name": "ignore_single",
            "type": "bool",
            "description": "全局忽略与父级无关联实例,默认false"
          },
          {
            "name": "object_id",
            "type": "object_id",
            "description": "模型Id"
          },
          {
            "name": "instanceId",
            "type": "instance_id",
            "description": "实例Id"
          }
        ],
        "required": ["tree", "object_id", "instanceId"],
        "default": {
          "ignore_single": false
        }
      },
      "response": {
        "type": "map"
      }
    },
    {
      "contract": "cmdb.instance_tree.InstanceTreeAnchorV2",
      "name": "InstanceTreeAnchorV2",
      "version": "1.0.0",
      "description": "实例树定位V2",
      "endpoint": {
        "method": "POST",
        "uri": "/v2/instance_tree/anchor"
      },
      "import": ["easyops/model/cmdb/instance_tree_root_node"],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "tree",
            "type": "InstanceTreeRootNode",
            "description": "树定义"
          },
          {
            "name": "ignore_single",
            "type": "bool",
            "description": "全局忽略与父级无关联实例,默认false"
          },
          {
            "name": "object_id",
            "type": "object_id",
            "description": "模型Id"
          },
          {
            "name": "instanceIdList",
            "type": "string[]",
            "description": "实例Id列表，子节点Id必须放置最后"
          }
        ],
        "required": ["tree", "object_id", "instanceIdList"],
        "default": {
          "ignore_single": false
        }
      },
      "response": {
        "type": "map"
      }
    },
    {
      "contract": "cmdb.instance_tree.InstanceTreeExpand",
      "name": "InstanceTreeExpand",
      "version": "1.0.0",
      "description": "展开实例树某一级",
      "endpoint": {
        "method": "POST",
        "uri": "/instance_tree/expand"
      },
      "import": ["easyops/model/cmdb/instance_tree_root_node"],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "tree",
            "type": "InstanceTreeRootNode",
            "description": "树定义"
          },
          {
            "name": "ignore_single",
            "type": "bool",
            "description": "全局忽略与父级无关联实例,默认false"
          },
          {
            "name": "object_id",
            "type": "object_id",
            "description": "模型Id,不传则展开首层"
          },
          {
            "name": "instanceId",
            "type": "instance_id",
            "description": "实例Id"
          }
        ],
        "required": ["tree"],
        "default": {
          "ignore_single": false
        }
      },
      "response": {
        "type": "map"
      }
    },
    {
      "contract": "cmdb.instance_tree.InstanceTreeSearch",
      "name": "InstanceTreeSearch",
      "version": "1.0.0",
      "description": "整树搜索",
      "endpoint": {
        "method": "POST",
        "uri": "/instance_tree/search"
      },
      "import": ["easyops/model/cmdb/instance_tree_root_node"],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "tree",
            "type": "InstanceTreeRootNode",
            "description": "树定义"
          },
          {
            "name": "ignore_single",
            "type": "bool",
            "description": "全局忽略与父级无关联实例,默认false"
          },
          {
            "name": "query",
            "type": "map",
            "description": "搜索条件"
          }
        ],
        "required": ["tree", "query"],
        "default": {
          "ignore_single": false
        }
      },
      "response": {
        "type": "map"
      }
    },
    {
      "contract": "cmdb.object_attribute.Create",
      "name": "Create",
      "version": "1.0.0",
      "description": "创建模型属性定义",
      "endpoint": {
        "method": "POST",
        "uri": "/object/:objectId/attr"
      },
      "import": ["easyops/model/cmdb/object_attr"],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "objectId",
            "type": "object_id",
            "description": "模型Id"
          },
          {
            "ref": "ObjectAttr.id"
          },
          {
            "ref": "ObjectAttr.name"
          },
          {
            "ref": "ObjectAttr.unique"
          },
          {
            "ref": "ObjectAttr.readonly"
          },
          {
            "ref": "ObjectAttr.required"
          },
          {
            "ref": "ObjectAttr.tag"
          },
          {
            "ref": "ObjectAttr.description"
          },
          {
            "ref": "ObjectAttr.tips"
          },
          {
            "ref": "ObjectAttr.value"
          }
        ],
        "required": [
          "objectId",
          "ObjectAttr.id",
          "ObjectAttr.name",
          "ObjectAttr.value"
        ]
      },
      "response": {
        "type": "ObjectAttr"
      }
    },
    {
      "contract": "cmdb.object_relation.Create",
      "name": "Create",
      "version": "1.0.0",
      "description": "创建模型关系定义",
      "endpoint": {
        "method": "POST",
        "uri": "/object_relation"
      },
      "import": ["easyops/model/cmdb/object_relation"],
      "request": {
        "type": "object",
        "fields": [
          {
            "ref": "ObjectRelation.name"
          },
          {
            "ref": "ObjectRelation.left_object_id"
          },
          {
            "ref": "ObjectRelation.left_id"
          },
          {
            "ref": "ObjectRelation.left_description"
          },
          {
            "ref": "ObjectRelation.left_min"
          },
          {
            "ref": "ObjectRelation.left_max"
          },
          {
            "ref": "ObjectRelation.left_groups"
          },
          {
            "ref": "ObjectRelation.left_tags"
          },
          {
            "ref": "ObjectRelation.right_object_id"
          },
          {
            "ref": "ObjectRelation.right_id"
          },
          {
            "ref": "ObjectRelation.right_description"
          },
          {
            "ref": "ObjectRelation.right_min"
          },
          {
            "ref": "ObjectRelation.right_max"
          },
          {
            "ref": "ObjectRelation.right_groups"
          },
          {
            "ref": "ObjectRelation.right_tags"
          }
        ],
        "required": [
          "ObjectRelation.name",
          "ObjectRelation.left_object_id",
          "ObjectRelation.left_id",
          "ObjectRelation.left_description",
          "ObjectRelation.right_object_id",
          "ObjectRelation.right_id",
          "ObjectRelation.right_description"
        ]
      },
      "response": {
        "type": "ObjectRelation"
      }
    },
    {
      "contract": "cmdb.object_relation.CreateRelationGroup",
      "name": "CreateRelationGroup",
      "version": "1.0.0",
      "description": "创建模型关系分组",
      "endpoint": {
        "method": "POST",
        "uri": "/object/:object_id/relation_group"
      },
      "import": ["easyops/model/cmdb/object_relation_group"],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "object_id",
            "type": "object_id",
            "description": "模型Id"
          },
          {
            "name": "id",
            "type": "string",
            "description": "分组ID"
          },
          {
            "name": "name",
            "type": "string",
            "description": "分组名称"
          },
          {
            "name": "relations",
            "type": "object[]",
            "fields": [
              {
                "name": "relation_side_id",
                "type": "string",
                "description": "表示关系的left_id或者right_id的值, 用于表示分组的关系是关系的哪一端"
              }
            ],
            "description": "分组中的关系"
          }
        ],
        "required": ["object_id", "id", "name"]
      },
      "response": {
        "type": "ObjectRelationGroup"
      }
    },
    {
      "contract": "cmdb.object_relation.DeleteRelation",
      "name": "DeleteRelation",
      "version": "1.0.0",
      "description": "删除模型关系定义",
      "endpoint": {
        "method": "DELETE",
        "uri": "/object_relation/:relation_id"
      },
      "import": ["easyops/model/cmdb/object_relation"],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "relation_id",
            "type": "object_relation_id",
            "description": "关系ID"
          }
        ],
        "required": ["relation_id"]
      },
      "response": null
    },
    {
      "contract": "cmdb.object_relation.DeleteRelationGroup",
      "name": "DeleteRelationGroup",
      "version": "1.0.0",
      "description": "删除模型关系分组",
      "endpoint": {
        "method": "DELETE",
        "uri": "/object/:object_id/relation_group/:id"
      },
      "import": ["easyops/model/cmdb/object_relation_group"],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "object_id",
            "type": "object_id",
            "description": "模型Id"
          },
          {
            "name": "id",
            "type": "string",
            "description": "分组ID"
          }
        ],
        "required": ["object_id", "id"]
      },
      "response": null
    },
    {
      "contract": "cmdb.object_relation.Get",
      "name": "Get",
      "version": "1.0.0",
      "description": "获取单个模型关系",
      "endpoint": {
        "method": "GET",
        "uri": "/object_relation/:relation_id"
      },
      "import": ["easyops/model/cmdb/object_relation"],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "relation_id",
            "type": "object_relation_id",
            "description": "关系ID"
          }
        ],
        "required": ["relation_id"]
      },
      "response": {
        "type": "ObjectRelation"
      }
    },
    {
      "contract": "cmdb.object_relation.ObjectRelationSnapshot",
      "name": "ObjectRelationSnapshot",
      "version": "1.0.0",
      "description": "查询指定版本模型关系快照",
      "endpoint": {
        "method": "GET",
        "uri": "/history/object_relation/:relation_id"
      },
      "import": ["easyops/model/cmdb/object_relation"],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "relation_id",
            "type": "object_relation_id",
            "description": "关系ID"
          },
          {
            "name": "_version",
            "type": "int",
            "description": "版本号(-1表示查询最新版本)"
          }
        ],
        "required": ["relation_id", "_version"]
      },
      "response": {
        "type": "object",
        "fields": [
          {
            "ref": "ObjectRelation.*"
          },
          {
            "name": "_id",
            "type": "string",
            "description": "快照ID"
          }
        ]
      }
    },
    {
      "contract": "cmdb.object_relation.GetRelationsByGroupId",
      "name": "GetRelationsByGroupId",
      "version": "1.0.0",
      "description": "根据关系分组查询关系列表",
      "endpoint": {
        "method": "get",
        "uri": "/object_relation/object/:object_id/relation_group/:group_id"
      },
      "import": ["easyops/model/cmdb/object_relation"],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "object_id",
            "type": "object_id",
            "description": "模型ID"
          },
          {
            "name": "group_id",
            "type": "string",
            "description": "分组ID"
          }
        ],
        "required": ["object_id", "group_id"]
      },
      "response": {
        "wrapper": false,
        "type": "object",
        "fields": [
          {
            "name": "code",
            "type": "int",
            "description": "返回码"
          },
          {
            "name": "error",
            "type": "string",
            "description": "页码"
          },
          {
            "name": "message",
            "type": "string",
            "description": "返回信息"
          },
          {
            "name": "data",
            "type": "ObjectRelation[]",
            "description": "数据"
          }
        ]
      }
    },
    {
      "contract": "cmdb.object_relation.Update",
      "name": "Update",
      "version": "1.0.0",
      "description": "更新模型关系定义",
      "endpoint": {
        "method": "PUT",
        "uri": "/object_relation/:relation_id"
      },
      "import": ["easyops/model/cmdb/object_relation"],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "relation_id",
            "type": "object_relation_id",
            "description": "关系ID"
          },
          {
            "ref": "ObjectRelation.name"
          },
          {
            "ref": "ObjectRelation.left_description"
          },
          {
            "ref": "ObjectRelation.left_groups"
          },
          {
            "ref": "ObjectRelation.left_tags"
          },
          {
            "ref": "ObjectRelation.right_description"
          },
          {
            "ref": "ObjectRelation.right_groups"
          },
          {
            "ref": "ObjectRelation.right_tags"
          }
        ],
        "required": [
          "ObjectRelation.name",
          "ObjectRelation.left_description",
          "ObjectRelation.left_groups",
          "ObjectRelation.left_tags",
          "ObjectRelation.right_description",
          "ObjectRelation.right_groups",
          "ObjectRelation.right_tags"
        ]
      },
      "response": {
        "type": "ObjectRelation"
      }
    },
    {
      "contract": "cmdb.object_relation.UpdateRelationGroup",
      "name": "UpdateRelationGroup",
      "version": "1.0.0",
      "description": "更新模型关系分组",
      "endpoint": {
        "method": "PUT",
        "uri": "/object/:object_id/relation_group/:id"
      },
      "import": ["easyops/model/cmdb/object_relation_group"],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "object_id",
            "type": "object_id",
            "description": "模型Id"
          },
          {
            "name": "id",
            "type": "string",
            "description": "分组ID"
          },
          {
            "name": "name",
            "type": "string",
            "description": "分组名称"
          },
          {
            "name": "relations",
            "type": "object[]",
            "fields": [
              {
                "name": "relation_side_id",
                "type": "string",
                "description": "表示关系的left_id或者right_id的值, 用于表示分组的关系是关系的哪一端"
              }
            ],
            "description": "分组中的关系"
          }
        ],
        "required": ["object_id", "id"]
      },
      "response": {
        "type": "ObjectRelationGroup"
      }
    },
    {
      "contract": "cmdb.terraform.DeleteState",
      "name": "DeleteState",
      "version": "1.0.0",
      "description": "删除state",
      "endpoint": {
        "method": "DELETE",
        "uri": "/api/terraform/v1/object/:objectId/instance/:instanceId/state"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "objectId",
            "type": "object_id",
            "description": "模型Id"
          },
          {
            "name": "instanceId",
            "type": "instance_id",
            "description": "实例Id"
          },
          {
            "name": "org",
            "type": "org",
            "description": "ORG"
          },
          {
            "name": "user",
            "type": "user_name",
            "description": "操作用户,默认defaultUser"
          }
        ],
        "default": {
          "user": "defaultUser"
        },
        "required": ["objectId", "instanceId", "org"]
      },
      "response": null
    },
    {
      "contract": "cmdb.terraform.GetState",
      "name": "GetState",
      "version": "1.0.0",
      "description": "获取state",
      "endpoint": {
        "method": "GET",
        "uri": "/api/terraform/v1/object/:objectId/instance/:instanceId/state"
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "objectId",
            "type": "object_id",
            "description": "模型Id"
          },
          {
            "name": "instanceId",
            "type": "instance_id",
            "description": "实例Id"
          },
          {
            "name": "org",
            "type": "org",
            "description": "ORG"
          },
          {
            "name": "user",
            "type": "user_name",
            "description": "操作用户,默认defaultUser"
          }
        ],
        "default": {
          "user": "defaultUser"
        },
        "required": ["objectId", "instanceId", "org"]
      },
      "response": {
        "wrapper": false,
        "type": "map",
        "description": "详细接口请查看model定义(TFStateV4)"
      }
    },
    {
      "contract": "cmdb.terraform.LockState",
      "name": "LockState",
      "version": "1.0.0",
      "description": "锁定工作区",
      "endpoint": {
        "method": "POST",
        "uri": "/api/terraform/v1/object/:objectId/instance/:instanceId/state/lock",
        "ext_fields": [
          {
            "name": "body",
            "source": "body"
          }
        ]
      },
      "import": ["easyops/model/cmdb/tf_lock_info"],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "objectId",
            "type": "object_id",
            "description": "模型Id"
          },
          {
            "name": "instanceId",
            "type": "instance_id",
            "description": "实例Id"
          },
          {
            "name": "org",
            "type": "org",
            "description": "ORG"
          },
          {
            "name": "user",
            "type": "user_name",
            "description": "操作用户,默认defaultUser"
          },
          {
            "name": "body",
            "type": "TFLockInfo",
            "description": "锁信息"
          }
        ],
        "default": {
          "user": "defaultUser"
        },
        "required": ["objectId", "instanceId", "org", "body"]
      },
      "response": null
    },
    {
      "contract": "cmdb.terraform.UnLockState",
      "name": "UnLockState",
      "version": "1.0.0",
      "description": "解锁工作区",
      "endpoint": {
        "method": "POST",
        "uri": "/api/terraform/v1/object/:objectId/instance/:instanceId/state/unlock",
        "ext_fields": [
          {
            "name": "body",
            "source": "body"
          }
        ]
      },
      "import": ["easyops/model/cmdb/tf_lock_info"],
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "objectId",
            "type": "object_id",
            "description": "模型Id"
          },
          {
            "name": "instanceId",
            "type": "instance_id",
            "description": "实例Id"
          },
          {
            "name": "org",
            "type": "org",
            "description": "ORG"
          },
          {
            "name": "user",
            "type": "user_name",
            "description": "操作用户,默认defaultUser"
          },
          {
            "name": "body",
            "type": "TFLockInfo",
            "description": "锁信息"
          }
        ],
        "default": {
          "user": "defaultUser"
        },
        "required": ["objectId", "instanceId", "org", "body"]
      },
      "response": null
    },
    {
      "contract": "cmdb.terraform.UpdateState",
      "name": "UpdateState",
      "version": "1.0.0",
      "description": "更新state",
      "endpoint": {
        "method": "POST",
        "uri": "/api/terraform/v1/object/:objectId/instance/:instanceId/state",
        "ext_fields": [
          {
            "name": "body",
            "source": "body"
          }
        ]
      },
      "request": {
        "type": "object",
        "fields": [
          {
            "name": "objectId",
            "type": "object_id",
            "description": "模型Id"
          },
          {
            "name": "instanceId",
            "type": "instance_id",
            "description": "实例Id"
          },
          {
            "name": "org",
            "type": "org",
            "description": "ORG"
          },
          {
            "name": "user",
            "type": "user_name",
            "description": "操作用户,默认defaultUser"
          },
          {
            "name": "ID",
            "type": "string",
            "description": "锁Id"
          },
          {
            "name": "body",
            "type": "map",
            "description": "state内容, 暂不约束,请查看model定义(TFStateV4)"
          }
        ],
        "default": {
          "user": "defaultUser"
        },
        "required": ["objectId", "instanceId", "org", "body"]
      },
      "response": null
    }
  ]
}
